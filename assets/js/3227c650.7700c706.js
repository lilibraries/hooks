(self.webpackChunk_lilib_hooks=self.webpackChunk_lilib_hooks||[]).push([[6221],{7030:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(7294);const a="exampleBlock_ywu8",o=e=>{let{children:t}=e;return r.createElement("div",{className:a},t)}},5e3:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var r=n(7294),a=n(8446),o=n.n(a),i=n(3560),u=n.n(i),l=n(2844),s=n(4708),c=n(6937),f=n(5912),p=n(4259),d=n(9601);const m=function(e,t){void 0===t&&(t=o());const n=(0,r.useRef)(e);return(0,d.Z)().current&&(t(n.current,e)||(n.current=e)),(0,r.useDebugValue)(n.current===e?"Latest":"Previous"),n.current};const v=function(e){return function(t,n){const{defaultValue:a,polling:i=!1,pollingInterval:d=100,compare:v=o(),validate:g,serialize:k=JSON.stringify,deserialize:h=JSON.parse}=n||{},b=m(a,v);function N(){try{const n=e?.getItem(t);if(null!=n){const e=h(n);return g?g(e)?e:b:e}}catch(n){console.error(n)}return b}const[y,Z]=(0,f.Z)(N),S=(0,s.Z)((n=>{Z((r=>{if(void 0===(n=u()(n)?n(r):n))return e?.removeItem(t),b;try{e?.setItem(t,k(n))}catch(a){console.error(a)}return n}))})),w=()=>{const e=N();v(e,y)||Z(e)},[C,x]=(0,c.Z)(w,d);return(0,r.useEffect)((()=>{x(),i&&C()}),[i]),(0,p.Z)((()=>window),"storage",w),(0,l.Z)((()=>{x(),Z(N()),i&&C()}),[t]),(0,l.Z)((()=>{null!=e?.getItem(t)||v(b,y)||Z(b)}),[b]),(0,r.useDebugValue)(y),(0,r.useDebugValue)(t,(t=>"(raw) "+e?.getItem(t))),[y,S]}}},5150:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(7294),a=n(8134);const o=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];const o=[e,t,...r];if(arguments.length<2)throw new TypeError("The length of `areArraysEqual`'s params must be >= 2.");if(o.some((e=>!Array.isArray(e))))throw new TypeError("The params of `areArraysEqual` must be arrays.");const i=o[0],u=o.length;let l=!0;for(let s=1;s<u;s++)i!==o[s]&&(l=!1);if(l)return!0;for(let s=1;s<u;s++)if(i.length!==o[s].length)return!1;for(let s=1;s<u;s++){const e=o[s],t=i.length;for(let n=0;n<t;n++)if(!Object.is(i[n],e[n]))return!1}return!0};var i=n(7921);const u=function(e){return function(t,n,u){const l=(0,r.useRef)(!1),s=(0,r.useRef)([]),c=(0,r.useRef)([]),f=(0,r.useRef)();function p(){f.current?.()}e((()=>{const e=u.map(i.Z);function r(){s.current=n,c.current=e,f.current=t()}l.current?o(n,s.current)&&o(e,c.current)||(p(),r()):(r(),l.current=!0)})),(0,a.Z)((()=>{p(),l.current=!1}))}}},4259:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(3218),a=n.n(r),o=n(4708),i=n(3809);const u=function(e){return!!e&&!!e.addEventListener&&!!e.removeEventListener};var l=n(7921);const s=function(e,t,n,r){let s,c,f;"boolean"==typeof r?s=r:a()(r)&&(void 0!==r.capture&&(s=!!r.capture),void 0!==r.once&&(c=!!r.once),void 0!==r.passive&&(f=!!r.passive));const p=(0,o.Z)(n);(0,i.Z)((()=>{const n=(0,l.Z)(e);if(u(n))return n.addEventListener(t,p,{capture:s,once:c,passive:f}),()=>{n.removeEventListener(t,p,{capture:s})}}),[t,s,c,f],[e])}},6937:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(9051);const a=function(e,t){const[n,a]=(0,r.Z)((()=>{e(),n()}),t);return[n,a]}},8242:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(7294);const a=function(e){const t=(0,r.useRef)(e);return t.current=e,t}},9601:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(7294);const a=function(){const e=(0,r.useRef)(!1);return(0,r.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),e}},4708:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(7294),a=n(8242);const o=function(e){const t=(0,r.useRef)(),n=(0,a.Z)(e);return t.current||(t.current=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.current.apply(this,t)}),t.current}},5912:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7294),a=n(4708),o=n(2767);const i=function(e){const t=(0,o.Z)(),[n,i]=(0,r.useState)(e);return[n,(0,a.Z)((e=>{t.current||i(e)}))]}},3809:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(7294);const a=(0,n(5150).Z)(r.useEffect)},9051:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7294),a=n(8134),o=n(4708);const i=function(e,t){const n=(0,o.Z)(e),i=(0,r.useRef)(),u=(0,o.Z)((()=>{void 0!==i.current&&(clearTimeout(i.current),i.current=void 0)})),l=(0,o.Z)((()=>{u(),i.current=setTimeout(n,t)}));return(0,a.Z)(u),[l,u]}},8134:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(7294);const a=function(e){const t=(0,r.useRef)(e);t.current=e,(0,r.useEffect)((()=>()=>{t.current()}),[])}},2767:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(7294);const a=function(){const e=(0,r.useRef)(!1);return(0,r.useEffect)((()=>(e.current=!1,()=>{e.current=!0})),[]),e}},2844:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(7294),a=n(8134);const o=function(e){return function(t,n){const o=(0,r.useRef)(!1);e((()=>{if(o.current)return t();o.current=!0}),n),(0,a.Z)((()=>{o.current=!1}))}}(r.useEffect)},7921:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(3218),a=n.n(r),o=n(3560),i=n.n(o),u=n(1665);const l=function(e){return u.Z?i()(e)?e():a()(e)&&"current"in e?e.current:e:null}},1665:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=!("undefined"==typeof window||!window.document||!window.document.createElement)},9738:(e,t,n)=>{"use strict";n.r(t),n.d(t,{assets:()=>m,contentTitle:()=>p,default:()=>k,frontMatter:()=>f,metadata:()=>d,toc:()=>v});var r=n(7462),a=n(7294),o=n(3905),i=n(814),u=n(7030),l=n(1665);const s=(0,n(5e3).Z)(l.Z?localStorage:null);const c=function(){const[e,t]=s("key",{polling:!0,defaultValue:"default value"});return a.createElement(a.Fragment,null,a.createElement("div",null,a.createElement("button",{onClick:()=>t(Math.random().toString())},"Set random value")," ",a.createElement("button",{onClick:()=>t(void 0)},"Remove")),a.createElement("div",null,"The value is: ",e))},f={},p=void 0,d={unversionedId:"useLocalStorage",id:"useLocalStorage",title:"useLocalStorage",description:"Get, set and/or remove localStorage.",source:"@site/docs/useLocalStorage.mdx",sourceDirName:".",slug:"/useLocalStorage",permalink:"/hooks/useLocalStorage",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"useCookie",permalink:"/hooks/useCookie"},next:{title:"useSessionStorage",permalink:"/hooks/useSessionStorage"}},m={},v=[{value:"API",id:"api",level:2},{value:"Example",id:"example",level:2}],g={toc:v};function k(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,r.Z)({},g,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Get, set and/or remove ",(0,o.kt)("inlineCode",{parentName:"p"},"localStorage"),"."),(0,o.kt)("h2",{id:"api"},"API"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"function useLocalStorage<T>(\n  key: string,\n  options?: {\n    defaultValue?: T;\n    polling?: boolean;\n    pollingInterval?: number;\n    compare?: (x: any, y: any) => boolean;\n    validate?: (value: any) => boolean;\n    serialize?: (value: T) => string;\n    deserialize?: (raw: string) => T;\n  }\n): [\n  value: T | undefined,\n  setLocalStorage: (\n    newValue: T | undefined | ((prevValue: T | undefined) => T | undefined)\n  ) => void\n];\n")),(0,o.kt)("p",null,"Params:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"key"),":")," ",(0,o.kt)("inlineCode",{parentName:"li"},"localStorage")," key."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"options"),":")," Options object.",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"options.defaultValue"),":")," Default value."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"options.polling"),":")," Pollingly update value. Default is ",(0,o.kt)("inlineCode",{parentName:"li"},"false"),"."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"options.pollingInterval"),":")," Polling interval time, in milliseconds. Default is ",(0,o.kt)("inlineCode",{parentName:"li"},"100"),"."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"options.compare"),":")," The comparison function in polling. Use deep comparison by default."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"options.validate"),":")," Validate the value got from ",(0,o.kt)("inlineCode",{parentName:"li"},"localStorage")," which deserialized by ",(0,o.kt)("inlineCode",{parentName:"li"},"deserialize")," function. If this function return ",(0,o.kt)("inlineCode",{parentName:"li"},"false"),", the ",(0,o.kt)("inlineCode",{parentName:"li"},"defaultValue")," will be used."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"options.serialize"),":")," Serialization function. Default is ",(0,o.kt)("inlineCode",{parentName:"li"},"JSON.stringify"),"."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"options.deserialize"),":")," Deserialization function. Default is ",(0,o.kt)("inlineCode",{parentName:"li"},"JSON.parse"),".")))),(0,o.kt)("p",null,"Results:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"value"),":")," Parsed by the deserialization function."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"setLocalStorage"),":")," Set ",(0,o.kt)("inlineCode",{parentName:"li"},"localStorage"),". If the ",(0,o.kt)("inlineCode",{parentName:"li"},"newValue")," is ",(0,o.kt)("inlineCode",{parentName:"li"},"undefined"),", return the ",(0,o.kt)("inlineCode",{parentName:"li"},"defaultValue"),".")),(0,o.kt)("h2",{id:"example"},"Example"),(0,o.kt)(u.Z,{mdxType:"ExampleBlock"},(0,o.kt)(c,{mdxType:"Example"})),(0,o.kt)(i.Z,{language:"tsx",mdxType:"CodeBlock"},'import React from "react";\nimport { useLocalStorage } from "@lilib/hooks";\n\nfunction Example() {\n  const [value, setLocalStorage] = useLocalStorage("key", {\n    polling: true,\n    defaultValue: "default value",\n  });\n\n  return (\n    <>\n      <div>\n        <button onClick={() => setLocalStorage(Math.random().toString())}>\n          Set random value\n        </button>{" "}\n        <button onClick={() => setLocalStorage(undefined)}>Remove</button>\n      </div>\n      <div>The value is: {value}</div>\n    </>\n  );\n}\n\nexport default Example;\n'))}k.isMDXComponent=!0},8668:(e,t,n)=>{var r=n(3369),a=n(619),o=n(2385);function i(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}i.prototype.add=i.prototype.push=a,i.prototype.has=o,e.exports=i},2908:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},939:(e,t,n)=>{var r=n(2492),a=n(7005);e.exports=function e(t,n,o,i,u){return t===n||(null==t||null==n||!a(t)&&!a(n)?t!=t&&n!=n:r(t,n,o,i,e,u))}},2492:(e,t,n)=>{var r=n(6384),a=n(7114),o=n(8351),i=n(6096),u=n(4160),l=n(1469),s=n(4144),c=n(6719),f="[object Arguments]",p="[object Array]",d="[object Object]",m=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,v,g,k){var h=l(e),b=l(t),N=h?p:u(e),y=b?p:u(t),Z=(N=N==f?d:N)==d,S=(y=y==f?d:y)==d,w=N==y;if(w&&s(e)){if(!s(t))return!1;h=!0,Z=!1}if(w&&!Z)return k||(k=new r),h||c(e)?a(e,t,n,v,g,k):o(e,t,N,n,v,g,k);if(!(1&n)){var C=Z&&m.call(e,"__wrapped__"),x=S&&m.call(t,"__wrapped__");if(C||x){var E=C?e.value():e,_=x?t.value():t;return k||(k=new r),g(E,_,n,v,k)}}return!!w&&(k||(k=new r),i(e,t,n,v,g,k))}},4757:e=>{e.exports=function(e,t){return e.has(t)}},7114:(e,t,n)=>{var r=n(8668),a=n(2908),o=n(4757);e.exports=function(e,t,n,i,u,l){var s=1&n,c=e.length,f=t.length;if(c!=f&&!(s&&f>c))return!1;var p=l.get(e),d=l.get(t);if(p&&d)return p==t&&d==e;var m=-1,v=!0,g=2&n?new r:void 0;for(l.set(e,t),l.set(t,e);++m<c;){var k=e[m],h=t[m];if(i)var b=s?i(h,k,m,t,e,l):i(k,h,m,e,t,l);if(void 0!==b){if(b)continue;v=!1;break}if(g){if(!a(t,(function(e,t){if(!o(g,t)&&(k===e||u(k,e,n,i,l)))return g.push(t)}))){v=!1;break}}else if(k!==h&&!u(k,h,n,i,l)){v=!1;break}}return l.delete(e),l.delete(t),v}},8351:(e,t,n)=>{var r=n(2705),a=n(1149),o=n(7813),i=n(7114),u=n(8776),l=n(1814),s=r?r.prototype:void 0,c=s?s.valueOf:void 0;e.exports=function(e,t,n,r,s,f,p){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!f(new a(e),new a(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var d=u;case"[object Set]":var m=1&r;if(d||(d=l),e.size!=t.size&&!m)return!1;var v=p.get(e);if(v)return v==t;r|=2,p.set(e,t);var g=i(d(e),d(t),r,s,f,p);return p.delete(e),g;case"[object Symbol]":if(c)return c.call(e)==c.call(t)}return!1}},6096:(e,t,n)=>{var r=n(8234),a=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,o,i,u){var l=1&n,s=r(e),c=s.length;if(c!=r(t).length&&!l)return!1;for(var f=c;f--;){var p=s[f];if(!(l?p in t:a.call(t,p)))return!1}var d=u.get(e),m=u.get(t);if(d&&m)return d==t&&m==e;var v=!0;u.set(e,t),u.set(t,e);for(var g=l;++f<c;){var k=e[p=s[f]],h=t[p];if(o)var b=l?o(h,k,p,t,e,u):o(k,h,p,e,t,u);if(!(void 0===b?k===h||i(k,h,n,o,u):b)){v=!1;break}g||(g="constructor"==p)}if(v&&!g){var N=e.constructor,y=t.constructor;N==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof N&&N instanceof N&&"function"==typeof y&&y instanceof y||(v=!1)}return u.delete(e),u.delete(t),v}},8776:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},619:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},2385:e=>{e.exports=function(e){return this.__data__.has(e)}},1814:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},8446:(e,t,n)=>{var r=n(939);e.exports=function(e,t){return r(e,t)}}}]);