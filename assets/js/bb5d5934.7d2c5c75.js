(self.webpackChunk_lilib_hooks=self.webpackChunk_lilib_hooks||[]).push([[4734],{8242:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var l=n(7294);const a=function(t){const e=(0,l.useRef)(t);return e.current=t,e}},4708:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});var l=n(7294),a=n(8242);const r=function(t){const e=(0,l.useRef)(),n=(0,a.Z)(t);return e.current||(e.current=function(){for(var t=arguments.length,e=new Array(t),l=0;l<t;l++)e[l]=arguments[l];return n.current.apply(this,e)}),e.current}},8042:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var l=n(7294),a=n(4708),r=n(8134);const i=function(){const t=(0,l.useRef)(!1);return(0,r.Z)((()=>{t.current=!0})),t};const o=function(t){const e=i(),[n,r]=(0,l.useState)(t);return[n,(0,a.Z)((t=>{e.current||r(t)}))]}},2230:(t,e,n)=>{"use strict";n.d(e,{Z:()=>c});var l=n(7294),a=n(3096),r=n.n(a),i=n(8242),o=n(4708),u=n(8134),s=n(8298);const c=function(t,e){let n=0,a=!1,c=!0;"number"==typeof e?n=e:(0,s.Z)(e)&&(void 0!==e.wait&&(n=+e.wait),void 0!==e.leading&&(a=!!e.leading),void 0!==e.trailing&&(c=!!e.trailing));const g=(0,i.Z)(t),f=(0,l.useRef)();(0,l.useMemo)((()=>{var t;null==(t=f.current)||t.flush(),f.current=r()((function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return g.current.apply(this,e)}),n,{leading:a,trailing:c})}),[n,a,c]);const d=(0,o.Z)((function(){for(var t,e=arguments.length,n=new Array(e),l=0;l<e;l++)n[l]=arguments[l];return null==(t=f.current)?void 0:t.apply(this,n)})),p=(0,o.Z)((()=>{var t;return null==(t=f.current)?void 0:t.flush()})),m=(0,o.Z)((()=>{var t;null==(t=f.current)||t.cancel()}));return(0,u.Z)(m),[d,{flush:p,cancel:m}]}},6061:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});var l=n(7294),a=n(4708);const r=function(t){void 0===t&&(t=!1);const[e,n]=(0,l.useState)(!!t),r=(0,a.Z)((t=>{n(void 0!==t?!!t:t=>!t)}));return[e,{toggle:r,toggleOn:(0,a.Z)((()=>{n(!0)})),toggleOff:(0,a.Z)((()=>{n(!1)}))}]}},8134:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var l=n(7294);const a=function(t){const e=(0,l.useRef)(t);e.current=t,(0,l.useEffect)((()=>()=>{e.current()}),[])}},2082:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var l=n(7294);const a=function(t){return function(e,n){const a=(0,l.useRef)(!1);t((()=>{if(a.current)return e();a.current=!0}),n)}}(l.useEffect)},8298:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l});const l=function(t){return"object"==typeof t&&null!==t}},7523:(t,e,n)=>{"use strict";n.r(e),n.d(e,{assets:()=>T,contentTitle:()=>k,default:()=>Z,frontMatter:()=>v,metadata:()=>b,toc:()=>C});var l=n(7462),a=n(7294),r=n(3905),i=n(3066),o=n(2823),u=n(6061),s=n(2082),c=n(4708),g=n(8042),f=n(8242),d=n(2230);const p=function(t,e){const n=(0,f.Z)(t),[l,a]=(0,g.Z)(t),[r,{cancel:i}]=(0,d.Z)(a,e),o=(0,c.Z)((function(t){i(),a(arguments.length>0?t:n.current)}));return(0,s.Z)((()=>{r(t)}),[t]),[l,{flush:o,cancel:i}]};function m(){return Math.ceil(5e3*Math.random())}const h=function(){const[t,e]=(0,a.useState)(m()),[n,{toggle:l}]=(0,u.Z)(!1),[r,{toggle:i}]=(0,u.Z)(!0),[o,s]=(0,a.useState)(""),c={wait:t,leading:n,trailing:r},[g,{flush:f,cancel:d}]=p(o,c);return a.createElement(a.Fragment,null,a.createElement("p",null,"Actions:"," ",a.createElement("button",{onClick:()=>e(m())},"Change wait time")," ",a.createElement("button",{onClick:()=>l()},"Toggle leading")," ",a.createElement("button",{onClick:()=>i()},"Toggle trailing")),a.createElement("p",null,"Options:"," ","{ wait: "+t+", leading: "+n+", trailing: "+r+" }"),a.createElement("p",null,"Enter value:"," ",a.createElement("input",{value:o,onChange:t=>{s(t.target.value)}})," ",a.createElement("button",{onClick:()=>f()},"Flush")," ",a.createElement("button",{onClick:()=>f("final value")},'Flush with "final value"')," ",a.createElement("button",{onClick:d},"Cancel")),a.createElement("div",null,"Throttled value: ",g))},v={},k=void 0,b={unversionedId:"useThrottledValue",id:"useThrottledValue",title:"useThrottledValue",description:"Throttle a value.",source:"@site/docs/useThrottledValue.mdx",sourceDirName:".",slug:"/useThrottledValue",permalink:"/hooks/useThrottledValue",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"useControllableState",permalink:"/hooks/useControllableState"},next:{title:"useDebouncedValue",permalink:"/hooks/useDebouncedValue"}},T={},C=[{value:"API",id:"api",level:2},{value:"Example",id:"example",level:2}],N={toc:C};function Z(t){let{components:e,...n}=t;return(0,r.kt)("wrapper",(0,l.Z)({},N,n,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Throttle a value."),(0,r.kt)("h2",{id:"api"},"API"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"function useThrottledValue<T>(\n  value: T,\n  options?: number | { wait?: number; leading?: boolean; trailing?: boolean }\n): [\n  throttledValue: T,\n  actions: {\n    flush: (finalValue?: T) => void;\n    cancel: () => void;\n  }\n];\n")),(0,r.kt)("p",null,"Params:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"value"),":")," The value that will be throttled."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"options"),":")," Throttle wait time or an options object.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"options.wait"),":")," Throttle wait time, in milliseconds. Default is ",(0,r.kt)("inlineCode",{parentName:"li"},"0"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"options.leading"),":")," Change throttled value on the leading edge. Default is ",(0,r.kt)("inlineCode",{parentName:"li"},"false"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"options.trailing"),":")," Change throttled value on the trailing edge. Default is ",(0,r.kt)("inlineCode",{parentName:"li"},"true"),".")))),(0,r.kt)("p",null,"Results:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"throttledValue"),":")," Throttled value."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"actions"),":")," Actions object.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"actions.flush"),":")," Flush funciton. The ",(0,r.kt)("inlineCode",{parentName:"li"},"finalValue")," will be returned as ",(0,r.kt)("inlineCode",{parentName:"li"},"throttledValue")," if it is specified."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"actions.cancel"),":")," Cancel throttle timer.")))),(0,r.kt)("h2",{id:"example"},"Example"),(0,r.kt)(o.Z,{mdxType:"ExampleBlock"},(0,r.kt)(h,{mdxType:"Example"})),(0,r.kt)(i.Z,{language:"tsx",mdxType:"CodeBlock"},'import React, { useState } from "react";\nimport { useThrottledValue, useToggle } from "@lilib/hooks";\n\nfunction random() {\n  return Math.ceil(Math.random() * 5000);\n}\n\nfunction Example() {\n  const [wait, setWait] = useState(random());\n  const [leading, { toggle: toggleLeading }] = useToggle(false);\n  const [trailing, { toggle: toggleTrailing }] = useToggle(true);\n\n  const [value, setValue] = useState("");\n  const options = { wait, leading, trailing };\n  const [throttledValue, { flush, cancel }] = useThrottledValue(value, options);\n\n  return (\n    <>\n      <p>\n        Actions:{" "}\n        <button onClick={() => setWait(random())}>Change wait time</button>{" "}\n        <button onClick={() => toggleLeading()}>Toggle leading</button>{" "}\n        <button onClick={() => toggleTrailing()}>Toggle trailing</button>\n      </p>\n      <p>\n        Options:{" "}\n        {`{ wait: ${wait}, leading: ${leading}, trailing: ${trailing} }`}\n      </p>\n      <p>\n        Enter value:{" "}\n        <input\n          value={value}\n          onChange={(event) => {\n            setValue(event.target.value);\n          }}\n        />{" "}\n        <button onClick={() => flush()}>Flush</button>{" "}\n        <button onClick={() => flush("final value")}>\n          Flush with "final value"\n        </button>{" "}\n        <button onClick={cancel}>Cancel</button>\n      </p>\n      <div>Throttled value: {throttledValue}</div>\n    </>\n  );\n}\n\nexport default Example;\n'))}Z.isMDXComponent=!0},3096:(t,e,n)=>{var l="Expected a function",a=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,u=parseInt,s="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,c="object"==typeof self&&self&&self.Object===Object&&self,g=s||c||Function("return this")(),f=Object.prototype.toString,d=Math.max,p=Math.min,m=function(){return g.Date.now()};function h(t,e,n){var a,r,i,o,u,s,c=0,g=!1,f=!1,h=!0;if("function"!=typeof t)throw new TypeError(l);function b(e){var n=a,l=r;return a=r=void 0,c=e,o=t.apply(l,n)}function T(t){return c=t,u=setTimeout(N,e),g?b(t):o}function C(t){var n=t-s;return void 0===s||n>=e||n<0||f&&t-c>=i}function N(){var t=m();if(C(t))return Z(t);u=setTimeout(N,function(t){var n=e-(t-s);return f?p(n,i-(t-c)):n}(t))}function Z(t){return u=void 0,h&&a?b(t):(a=r=void 0,o)}function w(){var t=m(),n=C(t);if(a=arguments,r=this,s=t,n){if(void 0===u)return T(s);if(f)return u=setTimeout(N,e),b(s)}return void 0===u&&(u=setTimeout(N,e)),o}return e=k(e)||0,v(n)&&(g=!!n.leading,i=(f="maxWait"in n)?d(k(n.maxWait)||0,e):i,h="trailing"in n?!!n.trailing:h),w.cancel=function(){void 0!==u&&clearTimeout(u),c=0,a=s=r=u=void 0},w.flush=function(){return void 0===u?o:Z(m())},w}function v(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function k(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==f.call(t)}(t))return NaN;if(v(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=v(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(a,"");var n=i.test(t);return n||o.test(t)?u(t.slice(2),n?2:8):r.test(t)?NaN:+t}t.exports=function(t,e,n){var a=!0,r=!0;if("function"!=typeof t)throw new TypeError(l);return v(n)&&(a="leading"in n?!!n.leading:a,r="trailing"in n?!!n.trailing:r),h(t,e,{leading:a,maxWait:e,trailing:r})}}}]);