/*! For license information please see c8dc830d.ac5eb2c1.js.LICENSE.txt */
(self.webpackChunk_lilib_hooks=self.webpackChunk_lilib_hooks||[]).push([[298],{67030:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var o=n(67294);const r="exampleBlock_ywu8",i=e=>{let{children:t}=e;return o.createElement("div",{className:r},t)}},66937:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var o=n(59051);const r=function(e,t){const[n,r]=(0,o.Z)((()=>{e(),n()}),t);return[n,r]}},58242:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var o=n(67294);const r=function(e){const t=(0,o.useRef)(e);return t.current=e,t}},14708:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var o=n(67294),r=n(58242);const i=function(e){const t=(0,o.useRef)(),n=(0,r.Z)(e);return t.current||(t.current=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return n.current.apply(this,t)}),t.current}},75912:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var o=n(67294),r=n(14708),i=n(72767);const a=function(e){const t=(0,i.Z)(),[n,a]=(0,o.useState)(e);return[n,(0,r.Z)((e=>{t.current||a(e)}))]}},59051:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var o=n(67294),r=n(58134),i=n(14708);const a=function(e,t){const n=(0,i.Z)(e),a=(0,o.useRef)(),u=(0,i.Z)((()=>{void 0!==a.current&&(clearTimeout(a.current),a.current=void 0)})),l=(0,i.Z)((()=>{u(),a.current=setTimeout(n,t)}));return(0,r.Z)(u),[l,u]}},58134:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var o=n(67294);const r=function(e){const t=(0,o.useRef)(e);t.current=e,(0,o.useEffect)((()=>()=>{t.current()}),[])}},72767:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var o=n(67294);const r=function(){const e=(0,o.useRef)(!1);return(0,o.useEffect)((()=>(e.current=!1,()=>{e.current=!0})),[]),e}},72844:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var o=n(67294),r=n(58134);const i=function(e){return function(t,n){const i=(0,o.useRef)(!1);e((()=>{if(i.current)return t();i.current=!0}),n),(0,r.Z)((()=>{i.current=!1}))}}(o.useEffect)},20814:(e,t,n)=>{"use strict";n.r(t),n.d(t,{assets:()=>x,contentTitle:()=>C,default:()=>y,frontMatter:()=>h,metadata:()=>N,toc:()=>j});var o=n(87462),r=n(67294),i=n(3905),a=n(90814),u=n(67030),l=n(23560),s=n.n(l);function c(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)e[o]=n[o]}return e}var p=function e(t,n){function o(e,o,r){if("undefined"!=typeof document){"number"==typeof(r=c({},n,r)).expires&&(r.expires=new Date(Date.now()+864e5*r.expires)),r.expires&&(r.expires=r.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var a in r)r[a]&&(i+="; "+a,!0!==r[a]&&(i+="="+r[a].split(";")[0]));return document.cookie=e+"="+t.write(o,e)+i}}return Object.create({set:o,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],o={},r=0;r<n.length;r++){var i=n[r].split("="),a=i.slice(1).join("=");try{var u=decodeURIComponent(i[0]);if(o[u]=t.read(a,u),e===u)break}catch(l){}}return e?o[e]:o}},remove:function(e,t){o(e,"",c({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,c({},this.attributes,t))},withConverter:function(t){return e(c({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});const d=p;var k=n(72844),m=n(14708),f=n(66937),v=n(75912);const g=function(e,t){const{defaultValue:n,polling:o=!1,pollingInterval:i=100,validate:a}=t||{};function u(){const t=d.get(e);return void 0!==t?a?a(t)?t:n:t:n}const[l,c]=(0,v.Z)(u),p=(0,m.Z)(((t,o)=>{c((r=>void 0===(t=s()(t)?t(r):t)?(d.remove(e,o),n):(d.set(e,t,o),t)))})),[g,b]=(0,f.Z)((()=>{const e=u();e!==l&&c(e)}),i);return(0,r.useEffect)((()=>{b(),o&&g()}),[o]),(0,k.Z)((()=>{b(),c(u()),o&&g()}),[e]),(0,k.Z)((()=>{void 0===d.get(e)&&n!==l&&c(n)}),[n]),(0,r.useDebugValue)(l),(0,r.useDebugValue)(e,(e=>"(raw) "+d.get(e))),[l,p]};const b=function(){const[e,t]=g("name",{polling:!0,defaultValue:"default value"});return r.createElement(r.Fragment,null,r.createElement("div",null,r.createElement("button",{onClick:()=>t(Math.random().toString())},"Set random cookie")," ",r.createElement("button",{onClick:()=>t(void 0)},"Remove")),r.createElement("div",null,"Cookie value: ",e))},h={},C=void 0,N={unversionedId:"useCookie",id:"useCookie",title:"useCookie",description:"This hook use js-cookie as the parser. You can use this hook to get, set and/or remove cookies.",source:"@site/docs/useCookie.mdx",sourceDirName:".",slug:"/useCookie",permalink:"/hooks/useCookie",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"useEventListener",permalink:"/hooks/useEventListener"},next:{title:"useLocalStorage",permalink:"/hooks/useLocalStorage"}},x={},j=[{value:"API",id:"api",level:2},{value:"Example",id:"example",level:2}],Z={toc:j};function y(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,o.Z)({},Z,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"This hook use ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/js-cookie/js-cookie"},"js-cookie")," as the parser. You can use this hook to get, set and/or remove cookies."),(0,i.kt)("h2",{id:"api"},"API"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},'function useCookie(\n  name: string,\n  options?: {\n    defaultValue?: string;\n    polling?: boolean;\n    pollingInterval?: number;\n    validate?: (value: string) => boolean;\n  }\n): [\n  value: string | undefined,\n  setCookie: (\n    newValue:\n      | string\n      | undefined\n      | ((prevValue: string | undefined) => string | undefined),\n    attributes?: CookieAttributes\n  ) => void\n];\n\ninterface CookieAttributes {\n  path?: string;\n  domain?: string;\n  secure?: boolean;\n  expires?: number | Date;\n  sameSite?: "strict" | "Strict" | "lax" | "Lax" | "none" | "None";\n}\n')),(0,i.kt)("p",null,"Params:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"name"),":")," Cookie name."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"options"),":")," Options object.",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"options.defaultValue"),":")," Default value. It will be returnd when the specified cookie is non-existant."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"options.polling"),":")," Pollingly update cookie value. Default is ",(0,i.kt)("inlineCode",{parentName:"li"},"false"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"options.pollingInterval"),":")," Polling interval time, in milliseconds. Default is ",(0,i.kt)("inlineCode",{parentName:"li"},"100"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"options.validate"),":")," Validate the value got from cookie. If this function return ",(0,i.kt)("inlineCode",{parentName:"li"},"false"),", the ",(0,i.kt)("inlineCode",{parentName:"li"},"defaultValue")," will be used.")))),(0,i.kt)("p",null,"Results:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"value"),":")," Cookie value."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"setCookie"),":")," A function that can set or remove the named cookie. It accepts two params:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"newValue"),":")," The new cookie value. If it is ",(0,i.kt)("inlineCode",{parentName:"li"},"undefined")," or a function that returns ",(0,i.kt)("inlineCode",{parentName:"li"},"undefined"),", the named cookie will be cleared, and the ",(0,i.kt)("inlineCode",{parentName:"li"},"options.defaultValue")," will be returnd as ",(0,i.kt)("inlineCode",{parentName:"li"},"value"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"attributes"),":")," Cookie attributes. See ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/js-cookie/js-cookie#cookie-attributes"},"js-cookie attributes"),".")))),(0,i.kt)("h2",{id:"example"},"Example"),(0,i.kt)(u.Z,{mdxType:"ExampleBlock"},(0,i.kt)(b,{mdxType:"Example"})),(0,i.kt)(a.Z,{language:"tsx",mdxType:"CodeBlock"},'import React from "react";\nimport { useCookie } from "@lilib/hooks";\n\nfunction Example() {\n  const [value, setCookie] = useCookie("name", {\n    polling: true,\n    defaultValue: "default value",\n  });\n\n  return (\n    <>\n      <div>\n        <button onClick={() => setCookie(Math.random().toString())}>\n          Set random cookie\n        </button>{" "}\n        <button onClick={() => setCookie(undefined)}>Remove</button>\n      </div>\n      <div>Cookie value: {value}</div>\n    </>\n  );\n}\n\nexport default Example;\n'))}y.isMDXComponent=!0},62705:(e,t,n)=>{var o=n(55639).Symbol;e.exports=o},44239:(e,t,n)=>{var o=n(62705),r=n(89607),i=n(2333),a=o?o.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?r(e):i(e)}},31957:(e,t,n)=>{var o="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=o},89607:(e,t,n)=>{var o=n(62705),r=Object.prototype,i=r.hasOwnProperty,a=r.toString,u=o?o.toStringTag:void 0;e.exports=function(e){var t=i.call(e,u),n=e[u];try{e[u]=void 0;var o=!0}catch(l){}var r=a.call(e);return o&&(t?e[u]=n:delete e[u]),r}},2333:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},55639:(e,t,n)=>{var o=n(31957),r="object"==typeof self&&self&&self.Object===Object&&self,i=o||r||Function("return this")();e.exports=i},23560:(e,t,n)=>{var o=n(44239),r=n(13218);e.exports=function(e){if(!r(e))return!1;var t=o(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},13218:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}}}]);