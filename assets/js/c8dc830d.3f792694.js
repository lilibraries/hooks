/*! For license information please see c8dc830d.3f792694.js.LICENSE.txt */
"use strict";(self.webpackChunk_lilib_hooks=self.webpackChunk_lilib_hooks||[]).push([[298],{6937:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(9051);const i=function(e,t){const[n,i]=(0,o.Z)((()=>{e(),n()}),t);return[n,i]}},8242:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(7294);const i=function(e){const t=(0,o.useRef)(e);return t.current=e,t}},4708:(e,t,n)=>{n.d(t,{Z:()=>r});var o=n(7294),i=n(8242);const r=function(e){const t=(0,o.useRef)(),n=(0,i.Z)(e);return t.current||(t.current=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return n.current.apply(this,t)}),t.current}},8042:(e,t,n)=>{n.d(t,{Z:()=>u});var o=n(7294),i=n(4708),r=n(8134);const a=function(){const e=(0,o.useRef)(!1);return(0,r.Z)((()=>{e.current=!0})),e};const u=function(e){const t=a(),[n,r]=(0,o.useState)(e);return[n,(0,i.Z)((e=>{t.current||r(e)}))]}},9051:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(7294),i=n(8134),r=n(4708);const a=function(e,t){const n=(0,r.Z)(e),a=(0,o.useRef)(),u=(0,r.Z)((()=>{void 0!==a.current&&(clearTimeout(a.current),a.current=void 0)})),l=(0,r.Z)((()=>{u(),a.current=setTimeout(n,t)}));return(0,i.Z)(u),[l,u]}},8134:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(7294);const i=function(e){const t=(0,o.useRef)(e);t.current=e,(0,o.useEffect)((()=>()=>{t.current()}),[])}},2082:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(7294);const i=function(e){return function(t,n){const i=(0,o.useRef)(!1);e((()=>{if(i.current)return t();i.current=!0}),n)}}(o.useEffect)},2641:(e,t,n)=>{n.d(t,{Z:()=>o});const o=function(e){return"function"==typeof e}},6768:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>N,contentTitle:()=>h,default:()=>w,frontMatter:()=>C,metadata:()=>b,toc:()=>x});var o=n(7462),i=n(7294),r=n(3905),a=n(3066),u=n(2823);function l(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)e[o]=n[o]}return e}var s=function e(t,n){function o(e,o,i){if("undefined"!=typeof document){"number"==typeof(i=l({},n,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var r="";for(var a in i)i[a]&&(r+="; "+a,!0!==i[a]&&(r+="="+i[a].split(";")[0]));return document.cookie=e+"="+t.write(o,e)+r}}return Object.create({set:o,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],o={},i=0;i<n.length;i++){var r=n[i].split("="),a=r.slice(1).join("=");try{var u=decodeURIComponent(r[0]);if(o[u]=t.read(a,u),e===u)break}catch(l){}}return e?o[e]:o}},remove:function(e,t){o(e,"",l({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,l({},this.attributes,t))},withConverter:function(t){return e(l({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});const c=s;var p=n(2082),d=n(4708),k=n(6937),m=n(8042),f=n(2641);const v=function(e,t){const{defaultValue:n,polling:o=!1,pollingInterval:r=100}=t||{};function a(){const t=c.get(e);return void 0!==t?t:n}const[u,l]=(0,m.Z)(a),s=(0,d.Z)(((t,o)=>{l((i=>void 0===(t=(0,f.Z)(t)?t(i):t)?(c.remove(e,o),n):(c.set(e,t,o),t)))})),[v,g]=(0,k.Z)((()=>{const e=a();e!==u&&l(e)}),r);return(0,i.useEffect)((()=>{g(),o&&v()}),[o]),(0,p.Z)((()=>{g(),l(a()),o&&v()}),[e]),(0,p.Z)((()=>{void 0===c.get(e)&&n!==u&&l(n)}),[n]),[u,s]};const g=function(){const[e,t]=v("name",{polling:!0,defaultValue:"default value"});return i.createElement(i.Fragment,null,i.createElement("div",null,i.createElement("button",{onClick:()=>t(Math.random().toString())},"Set random cookie")," ",i.createElement("button",{onClick:()=>t(void 0)},"Remove")),i.createElement("div",null,"Cookie value: ",e))},C={},h=void 0,b={unversionedId:"useCookie",id:"useCookie",title:"useCookie",description:"This hook use js-cookie as the parser. You can use this hook to get, set and/or remove cookies.",source:"@site/docs/useCookie.mdx",sourceDirName:".",slug:"/useCookie",permalink:"/hooks/useCookie",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"useEventListener",permalink:"/hooks/useEventListener"},next:{title:"useLocalStorage",permalink:"/hooks/useLocalStorage"}},N={},x=[{value:"API",id:"api",level:2},{value:"Example",id:"example",level:2}],Z={toc:x};function w(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,o.Z)({},Z,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"This hook use ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/js-cookie/js-cookie"},"js-cookie")," as the parser. You can use this hook to get, set and/or remove cookies."),(0,r.kt)("h2",{id:"api"},"API"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'interface CookieAttributes {\n  path?: string;\n  domain?: string;\n  secure?: boolean;\n  expires?: number | Date;\n  sameSite?: "strict" | "Strict" | "lax" | "Lax" | "none" | "None";\n}\n\nfunction useCookie(\n  name: string,\n  options: {\n    defaultValue: string;\n    polling?: boolean;\n    pollingInterval?: number;\n  }\n): readonly [\n  value: string,\n  setCookie: (\n    newValue: string | undefined | ((prevValue: string) => string | undefined),\n    attributes?: CookieAttributes\n  ) => void\n];\n\nfunction useCookie(\n  name: string,\n  options?: {\n    defaultValue?: string;\n    polling?: boolean;\n    pollingInterval?: number;\n  }\n): readonly [\n  value: string | undefined,\n  setCookie: (\n    newValue:\n      | string\n      | undefined\n      | ((prevValue: string | undefined) => string | undefined),\n    attributes?: CookieAttributes\n  ) => void\n];\n')),(0,r.kt)("p",null,"Params:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"name"),":")," Cookie name."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"options"),":")," Options object.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"options.defaultValue"),":")," Default value. It will be returnd when the specified cookie is non-existant."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"options.polling"),":")," Pollingly update cookie value. Default is ",(0,r.kt)("inlineCode",{parentName:"li"},"false"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"options.pollingInterval"),":")," Polling interval time, in milliseconds. Default is ",(0,r.kt)("inlineCode",{parentName:"li"},"100"),".")))),(0,r.kt)("p",null,"Results:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"value"),":")," Cookie value."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"setCookie"),":")," A function that can set or remove the named cookie. It accepts two params:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"newValue"),":")," The new cookie value. If it is ",(0,r.kt)("inlineCode",{parentName:"li"},"undefined")," or a function that returns ",(0,r.kt)("inlineCode",{parentName:"li"},"undefined"),", the named cookie will be cleared, and the ",(0,r.kt)("inlineCode",{parentName:"li"},"options.defaultValue")," will be returnd as ",(0,r.kt)("inlineCode",{parentName:"li"},"value"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"attributes"),":")," Cookie attributes. See ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/js-cookie/js-cookie#cookie-attributes"},"js-cookie attributes"),".")))),(0,r.kt)("h2",{id:"example"},"Example"),(0,r.kt)(u.Z,{mdxType:"ExampleBlock"},(0,r.kt)(g,{mdxType:"Example"})),(0,r.kt)(a.Z,{language:"tsx",mdxType:"CodeBlock"},'import React from "react";\nimport { useCookie } from "@lilib/hooks";\n\nfunction Example() {\n  const [value, setCookie] = useCookie("name", {\n    polling: true,\n    defaultValue: "default value",\n  });\n\n  return (\n    <>\n      <div>\n        <button onClick={() => setCookie(Math.random().toString())}>\n          Set random cookie\n        </button>{" "}\n        <button onClick={() => setCookie(undefined)}>Remove</button>\n      </div>\n      <div>Cookie value: {value}</div>\n    </>\n  );\n}\n\nexport default Example;\n'))}w.isMDXComponent=!0}}]);