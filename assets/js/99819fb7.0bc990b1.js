(self.webpackChunk_lilib_hooks=self.webpackChunk_lilib_hooks||[]).push([[908],{8242:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(7294);const a=function(t){const e=(0,r.useRef)(t);return e.current=t,e}},4708:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l});var r=n(7294),a=n(8242);const l=function(t){const e=(0,r.useRef)(),n=(0,a.Z)(t);return e.current||(e.current=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return n.current.apply(this,e)}),e.current}},2230:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var r=n(7294),a=n(3096),l=n.n(a),i=n(8242),o=n(4708),u=n(8134),c=n(8298);const s=function(t,e){let n=0,a=!1,s=!0;"number"==typeof e?n=e:(0,c.Z)(e)&&(void 0!==e.wait&&(n=+e.wait),void 0!==e.leading&&(a=!!e.leading),void 0!==e.trailing&&(s=!!e.trailing));const g=(0,i.Z)(t),p=(0,r.useRef)();(0,r.useMemo)((()=>{var t;null==(t=p.current)||t.flush(),p.current=l()((function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return g.current.apply(this,e)}),n,{leading:a,trailing:s})}),[n,a,s]);const d=(0,o.Z)((function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==(t=p.current)?void 0:t.apply(this,n)})),f=(0,o.Z)((()=>{var t;return null==(t=p.current)?void 0:t.flush()})),m=(0,o.Z)((()=>{var t;null==(t=p.current)||t.cancel()}));return(0,u.Z)(m),[d,{flush:f,cancel:m}]}},6061:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l});var r=n(7294),a=n(4708);const l=function(t){void 0===t&&(t=!1);const[e,n]=(0,r.useState)(!!t),l=(0,a.Z)((t=>{n(void 0!==t?!!t:t=>!t)}));return[e,{toggle:l,toggleOn:(0,a.Z)((()=>{n(!0)})),toggleOff:(0,a.Z)((()=>{n(!1)}))}]}},8134:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(7294);const a=function(t){const e=(0,r.useRef)(t);e.current=t,(0,r.useEffect)((()=>()=>{e.current()}),[])}},2082:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l});var r=n(7294),a=n(8134);const l=function(t){return function(e,n){const l=(0,r.useRef)(!1);t((()=>{if(l.current)return e();l.current=!0}),n),(0,a.Z)((()=>{l.current=!1}))}}(r.useEffect)},8298:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r=function(t){return"object"==typeof t&&null!==t}},5210:(t,e,n)=>{"use strict";n.r(e),n.d(e,{assets:()=>k,contentTitle:()=>f,default:()=>b,frontMatter:()=>d,metadata:()=>m,toc:()=>h});var r=n(7462),a=n(7294),l=n(3905),i=n(3066),o=n(2823),u=n(6061),c=n(2230),s=n(2082);function g(){return Math.ceil(5e3*Math.random())}const p=function(){const[t,e]=(0,a.useState)(g()),[n,{toggle:r}]=(0,u.Z)(!1),[l,{toggle:i}]=(0,u.Z)(!0),[o,p]=(0,a.useState)(""),[d,f]=(0,a.useState)(""),[m,{flush:k,cancel:h}]=(0,c.Z)((()=>{f(o)}),{wait:t,leading:n,trailing:l});return(0,s.Z)(m,[o]),a.createElement(a.Fragment,null,a.createElement("p",null,"Actions:"," ",a.createElement("button",{onClick:()=>e(g())},"Change wait time")," ",a.createElement("button",{onClick:()=>r()},"Toggle leading")," ",a.createElement("button",{onClick:()=>i()},"Toggle trailing")),a.createElement("p",null,"Options:"," ","{ wait: "+t+", leading: "+n+", trailing: "+l+" }"),a.createElement("p",null,"Enter value:"," ",a.createElement("input",{value:o,onChange:t=>{p(t.target.value)}})," ",a.createElement("button",{onClick:k},"Flush")," ",a.createElement("button",{onClick:h},"Cancel")),a.createElement("div",null,"Throttled value: ",d))},d={},f=void 0,m={unversionedId:"useThrottle",id:"useThrottle",title:"useThrottle",description:"Use throttled callback.",source:"@site/docs/useThrottle.mdx",sourceDirName:".",slug:"/useThrottle",permalink:"/hooks/useThrottle",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"useRerender",permalink:"/hooks/useRerender"},next:{title:"useDebounce",permalink:"/hooks/useDebounce"}},k={},h=[{value:"API",id:"api",level:2},{value:"Example",id:"example",level:2}],v={toc:h};function b(t){let{components:e,...n}=t;return(0,l.kt)("wrapper",(0,r.Z)({},v,n,{components:e,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"Use throttled callback."),(0,l.kt)("h2",{id:"api"},"API"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function useThrottle<T extends (...args: any[]) => any>(\n  callback: T,\n  options?: number | { wait?: number; leading?: boolean; trailing?: boolean }\n): [\n  throttledCallback: (...args: Parameters<T>) => ReturnType<T> | undefined,\n  actions: {\n    flush: () => ReturnType<T> | undefined;\n    cancel: () => void;\n  }\n];\n")),(0,l.kt)("p",null,"Params:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"strong"},"callback"),":")," Original callback function."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"strong"},"options"),":")," Throttle wait time or an options object.",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"strong"},"options.wait"),":")," Throttle wait time, in milliseconds. Default is ",(0,l.kt)("inlineCode",{parentName:"li"},"0"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"strong"},"options.leading"),":")," Run callback on the leading edge. Default is ",(0,l.kt)("inlineCode",{parentName:"li"},"false"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"strong"},"options.trailing"),":")," Run callback on the trailing edge. Default is ",(0,l.kt)("inlineCode",{parentName:"li"},"true"),".")))),(0,l.kt)("p",null,"Results:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"strong"},"throttledCallback"),":")," Throttled callback."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"strong"},"actions"),":")," Actions object.",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"strong"},"actions.flush"),":")," Flush funciton. Run callback immediately."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"strong"},"actions.cancel"),":")," Cancel throttle timer.")))),(0,l.kt)("h2",{id:"example"},"Example"),(0,l.kt)(o.Z,{mdxType:"ExampleBlock"},(0,l.kt)(p,{mdxType:"Example"})),(0,l.kt)(i.Z,{language:"tsx",mdxType:"CodeBlock"},'import React, { useState } from "react";\nimport { useThrottle, useToggle, useUpdate } from "@lilib/hooks";\n\nfunction random() {\n  return Math.ceil(Math.random() * 5000);\n}\n\nfunction Example() {\n  const [wait, setWait] = useState(random());\n  const [leading, { toggle: toggleLeading }] = useToggle(false);\n  const [trailing, { toggle: toggleTrailing }] = useToggle(true);\n\n  const [value, setValue] = useState("");\n  const [throttledValue, setThrottledValue] = useState("");\n  const [throttledCallback, { flush, cancel }] = useThrottle(\n    () => {\n      setThrottledValue(value);\n    },\n    { wait, leading, trailing }\n  );\n\n  useUpdate(throttledCallback, [value]);\n\n  return (\n    <>\n      <p>\n        Actions:{" "}\n        <button onClick={() => setWait(random())}>Change wait time</button>{" "}\n        <button onClick={() => toggleLeading()}>Toggle leading</button>{" "}\n        <button onClick={() => toggleTrailing()}>Toggle trailing</button>\n      </p>\n      <p>\n        Options:{" "}\n        {`{ wait: ${wait}, leading: ${leading}, trailing: ${trailing} }`}\n      </p>\n      <p>\n        Enter value:{" "}\n        <input\n          value={value}\n          onChange={(event) => {\n            setValue(event.target.value);\n          }}\n        />{" "}\n        <button onClick={flush}>Flush</button>{" "}\n        <button onClick={cancel}>Cancel</button>\n      </p>\n      <div>Throttled value: {throttledValue}</div>\n    </>\n  );\n}\n\nexport default Example;\n'))}b.isMDXComponent=!0},3096:(t,e,n)=>{var r="Expected a function",a=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,u=parseInt,c="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,s="object"==typeof self&&self&&self.Object===Object&&self,g=c||s||Function("return this")(),p=Object.prototype.toString,d=Math.max,f=Math.min,m=function(){return g.Date.now()};function k(t,e,n){var a,l,i,o,u,c,s=0,g=!1,p=!1,k=!0;if("function"!=typeof t)throw new TypeError(r);function b(e){var n=a,r=l;return a=l=void 0,s=e,o=t.apply(r,n)}function T(t){return s=t,u=setTimeout(C,e),g?b(t):o}function N(t){var n=t-c;return void 0===c||n>=e||n<0||p&&t-s>=i}function C(){var t=m();if(N(t))return y(t);u=setTimeout(C,function(t){var n=e-(t-c);return p?f(n,i-(t-s)):n}(t))}function y(t){return u=void 0,k&&a?b(t):(a=l=void 0,o)}function w(){var t=m(),n=N(t);if(a=arguments,l=this,c=t,n){if(void 0===u)return T(c);if(p)return u=setTimeout(C,e),b(c)}return void 0===u&&(u=setTimeout(C,e)),o}return e=v(e)||0,h(n)&&(g=!!n.leading,i=(p="maxWait"in n)?d(v(n.maxWait)||0,e):i,k="trailing"in n?!!n.trailing:k),w.cancel=function(){void 0!==u&&clearTimeout(u),s=0,a=c=l=u=void 0},w.flush=function(){return void 0===u?o:y(m())},w}function h(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function v(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==p.call(t)}(t))return NaN;if(h(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=h(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(a,"");var n=i.test(t);return n||o.test(t)?u(t.slice(2),n?2:8):l.test(t)?NaN:+t}t.exports=function(t,e,n){var a=!0,l=!0;if("function"!=typeof t)throw new TypeError(r);return h(n)&&(a="leading"in n?!!n.leading:a,l="trailing"in n?!!n.trailing:l),k(t,e,{leading:a,maxWait:e,trailing:l})}}}]);