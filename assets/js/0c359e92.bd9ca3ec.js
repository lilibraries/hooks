(self.webpackChunk_lilib_hooks=self.webpackChunk_lilib_hooks||[]).push([[5343],{45153:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(13218),o=n.n(r),a=n(23560),i=n.n(a),s=n(64635);const u=function(e){return s.Z?i()(e)?e():o()(e)&&"current"in e?e.current:e:null}},64635:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=!("undefined"==typeof window||!window.document||!window.document.createElement)},67030:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(67294);const o="exampleBlock_ywu8",a=e=>{let{children:t}=e;return r.createElement("div",{className:o},t)}},65e3:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var r=n(67294),o=n(18446),a=n.n(o),i=n(23560),s=n.n(i),u=n(72844),l=n(14708),c=n(66937),f=n(75912),p=n(27078),d=n(19601);const m=function(e,t){void 0===t&&(t=a());const n=(0,r.useRef)(e);return(0,d.Z)().current&&(t(n.current,e)||(n.current=e)),(0,r.useDebugValue)(n.current===e?"Latest":"Previous"),n.current};const v=function(e){return function(t,n){const{defaultValue:o,polling:i=!1,pollingInterval:d=100,compare:v=a(),validate:g,serialize:k=JSON.stringify,deserialize:h=JSON.parse}=n||{},b=m(o,v);function N(){try{const n=e?.getItem(t);if(null!=n){const e=h(n);return g?g(e)?e:b:e}}catch(n){console.error(n)}return b}const[y,S]=(0,f.Z)(N),Z=(0,l.Z)((n=>{S((r=>{if(void 0===(n=s()(n)?n(r):n))return e?.removeItem(t),b;try{e?.setItem(t,k(n))}catch(o){console.error(o)}return n}))})),w=()=>{const e=N();v(e,y)||S(e)},[C,x]=(0,c.Z)(w,d);return(0,r.useEffect)((()=>{x(),i&&C()}),[i]),(0,p.Z)((()=>window),"storage",w),(0,u.Z)((()=>{x(),S(N()),i&&C()}),[t]),(0,u.Z)((()=>{null!=e?.getItem(t)||v(b,y)||S(b)}),[b]),(0,r.useDebugValue)(y),(0,r.useDebugValue)(t,(t=>"(raw) "+e?.getItem(t))),[y,Z]}}},4177:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(67294),o=n(45153);const a=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];var a=[e,t].concat(r);if(arguments.length<2)throw new TypeError("The length of `areArraysEqual`'s params must be >= 2.");if(a.some((function(e){return!Array.isArray(e)})))throw new TypeError("The params of `areArraysEqual` must be arrays.");for(var i=a[0],s=a.length,u=!0,l=1;l<s;l++)i!==a[l]&&(u=!1);if(u)return!0;for(var c=1;c<s;c++)if(i.length!==a[c].length)return!1;for(var f=1;f<s;f++)for(var p=a[f],d=i.length,m=0;m<d;m++)if(!Object.is(i[m],p[m]))return!1;return!0};var i=n(58134);const s=function(e){return function(t,n,s){const u=(0,r.useRef)(!1),l=(0,r.useRef)([]),c=(0,r.useRef)([]),f=(0,r.useRef)();function p(){f.current?.()}e((()=>{const e=s.map(o.Z);function r(){l.current=n,c.current=e,f.current=t()}u.current?a(n,l.current)&&a(e,c.current)||(p(),r()):(r(),u.current=!0)})),(0,i.Z)((()=>{p(),u.current=!1}))}}},27078:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(13218),o=n.n(r),a=n(45153);const i=function(e){return!!e&&!!e.addEventListener&&!!e.removeEventListener};var s=n(14708),u=n(63809);const l=function(e,t,n,r){let l,c,f;"boolean"==typeof r?l=r:o()(r)&&(void 0!==r.capture&&(l=!!r.capture),void 0!==r.once&&(c=!!r.once),void 0!==r.passive&&(f=!!r.passive));const p=(0,s.Z)(n);(0,u.Z)((()=>{const n=(0,a.Z)(e);if(i(n))return n.addEventListener(t,p,{capture:l,once:c,passive:f}),()=>{n.removeEventListener(t,p,{capture:l})}}),[t,l,c,f],[e])}},66937:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(59051);const o=function(e,t){const[n,o]=(0,r.Z)((()=>{e(),n()}),t);return[n,o]}},58242:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(67294);const o=function(e){const t=(0,r.useRef)(e);return t.current=e,t}},19601:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(67294);const o=function(){const e=(0,r.useRef)(!1);return(0,r.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),e}},14708:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(67294),o=n(58242);const a=function(e){const t=(0,r.useRef)(),n=(0,o.Z)(e);return t.current||(t.current=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.current.apply(this,t)}),t.current}},75912:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(67294),o=n(14708),a=n(72767);const i=function(e){const t=(0,a.Z)(),[n,i]=(0,r.useState)(e);return[n,(0,o.Z)((e=>{t.current||i(e)}))]}},63809:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(67294);const o=(0,n(4177).Z)(r.useEffect)},59051:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(67294),o=n(58134),a=n(14708);const i=function(e,t){const n=(0,a.Z)(e),i=(0,r.useRef)(),s=(0,a.Z)((()=>{void 0!==i.current&&(clearTimeout(i.current),i.current=void 0)})),u=(0,a.Z)((()=>{s(),i.current=setTimeout(n,t)}));return(0,o.Z)(s),[u,s]}},58134:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(67294);const o=function(e){const t=(0,r.useRef)(e);t.current=e,(0,r.useEffect)((()=>()=>{t.current()}),[])}},72767:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(67294);const o=function(){const e=(0,r.useRef)(!1);return(0,r.useEffect)((()=>(e.current=!1,()=>{e.current=!0})),[]),e}},72844:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(67294),o=n(58134);const a=function(e){return function(t,n){const a=(0,r.useRef)(!1);e((()=>{if(a.current)return t();a.current=!0}),n),(0,o.Z)((()=>{a.current=!1}))}}(r.useEffect)},1562:(e,t,n)=>{"use strict";n.r(t),n.d(t,{assets:()=>m,contentTitle:()=>p,default:()=>k,frontMatter:()=>f,metadata:()=>d,toc:()=>v});var r=n(87462),o=n(67294),a=n(3905),i=n(90814),s=n(67030),u=n(64635);const l=(0,n(65e3).Z)(u.Z?sessionStorage:null);const c=function(){const[e,t]=l("key",{polling:!0,defaultValue:"default value"});return o.createElement(o.Fragment,null,o.createElement("div",null,o.createElement("button",{onClick:()=>t(Math.random().toString())},"Set random value")," ",o.createElement("button",{onClick:()=>t(void 0)},"Remove")),o.createElement("div",null,"The value is: ",e))},f={},p=void 0,d={unversionedId:"useSessionStorage",id:"useSessionStorage",title:"useSessionStorage",description:"Get, set and/or remove sessionStorage.",source:"@site/docs/useSessionStorage.mdx",sourceDirName:".",slug:"/useSessionStorage",permalink:"/hooks/useSessionStorage",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"useLocalStorage",permalink:"/hooks/useLocalStorage"},next:{title:"useLoad",permalink:"/hooks/useLoad"}},m={},v=[{value:"API",id:"api",level:2},{value:"Example",id:"example",level:2}],g={toc:v};function k(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},g,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Get, set and/or remove ",(0,a.kt)("inlineCode",{parentName:"p"},"sessionStorage"),"."),(0,a.kt)("h2",{id:"api"},"API"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"function useSessionStorage<T>(\n  key: string,\n  options?: {\n    defaultValue?: T;\n    polling?: boolean;\n    pollingInterval?: number;\n    compare?: (x: any, y: any) => boolean;\n    validate?: (value: any) => boolean;\n    serialize?: (value: T) => string;\n    deserialize?: (raw: string) => T;\n  }\n): [\n  value: T | undefined,\n  setSessionStorage: (\n    newValue: T | undefined | ((prevValue: T | undefined) => T | undefined)\n  ) => void\n];\n")),(0,a.kt)("p",null,"Params:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"key"),":")," ",(0,a.kt)("inlineCode",{parentName:"li"},"sessionStorage")," key."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"options"),":")," Options object.",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"options.defaultValue"),":")," Default value."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"options.polling"),":")," Pollingly update value. Default is ",(0,a.kt)("inlineCode",{parentName:"li"},"false"),"."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"options.pollingInterval"),":")," Polling interval time, in milliseconds. Default is ",(0,a.kt)("inlineCode",{parentName:"li"},"100"),"."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"options.compare"),":")," The comparison function in polling. Use deep comparison by default."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"options.validate"),":")," Validate the value got from ",(0,a.kt)("inlineCode",{parentName:"li"},"sessionStorage")," which deserialized by ",(0,a.kt)("inlineCode",{parentName:"li"},"deserialize")," function. If this function return ",(0,a.kt)("inlineCode",{parentName:"li"},"false"),", the ",(0,a.kt)("inlineCode",{parentName:"li"},"defaultValue")," will be used."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"options.serialize"),":")," Serialization function. Default is ",(0,a.kt)("inlineCode",{parentName:"li"},"JSON.stringify"),"."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"options.deserialize"),":")," Deserialization function. Default is ",(0,a.kt)("inlineCode",{parentName:"li"},"JSON.parse"),".")))),(0,a.kt)("p",null,"Results:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"value"),":")," Parsed by the deserialization function."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"setSessionStorage"),":")," Set ",(0,a.kt)("inlineCode",{parentName:"li"},"sessionStorage"),". If the ",(0,a.kt)("inlineCode",{parentName:"li"},"newValue")," is ",(0,a.kt)("inlineCode",{parentName:"li"},"undefined"),", return the ",(0,a.kt)("inlineCode",{parentName:"li"},"defaultValue"),".")),(0,a.kt)("h2",{id:"example"},"Example"),(0,a.kt)(s.Z,{mdxType:"ExampleBlock"},(0,a.kt)(c,{mdxType:"Example"})),(0,a.kt)(i.Z,{language:"tsx",mdxType:"CodeBlock"},'import React from "react";\nimport { useSessionStorage } from "@lilib/hooks";\n\nfunction Example() {\n  const [value, setSessionStorage] = useSessionStorage("key", {\n    polling: true,\n    defaultValue: "default value",\n  });\n\n  return (\n    <>\n      <div>\n        <button onClick={() => setSessionStorage(Math.random().toString())}>\n          Set random value\n        </button>{" "}\n        <button onClick={() => setSessionStorage(undefined)}>Remove</button>\n      </div>\n      <div>The value is: {value}</div>\n    </>\n  );\n}\n\nexport default Example;\n'))}k.isMDXComponent=!0},88668:(e,t,n)=>{var r=n(83369),o=n(90619),a=n(72385);function i(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}i.prototype.add=i.prototype.push=o,i.prototype.has=a,e.exports=i},82908:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},90939:(e,t,n)=>{var r=n(2492),o=n(37005);e.exports=function e(t,n,a,i,s){return t===n||(null==t||null==n||!o(t)&&!o(n)?t!=t&&n!=n:r(t,n,a,i,e,s))}},2492:(e,t,n)=>{var r=n(46384),o=n(67114),a=n(18351),i=n(16096),s=n(64160),u=n(1469),l=n(44144),c=n(36719),f="[object Arguments]",p="[object Array]",d="[object Object]",m=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,v,g,k){var h=u(e),b=u(t),N=h?p:s(e),y=b?p:s(t),S=(N=N==f?d:N)==d,Z=(y=y==f?d:y)==d,w=N==y;if(w&&l(e)){if(!l(t))return!1;h=!0,S=!1}if(w&&!S)return k||(k=new r),h||c(e)?o(e,t,n,v,g,k):a(e,t,N,n,v,g,k);if(!(1&n)){var C=S&&m.call(e,"__wrapped__"),x=Z&&m.call(t,"__wrapped__");if(C||x){var E=C?e.value():e,_=x?t.value():t;return k||(k=new r),g(E,_,n,v,k)}}return!!w&&(k||(k=new r),i(e,t,n,v,g,k))}},74757:e=>{e.exports=function(e,t){return e.has(t)}},67114:(e,t,n)=>{var r=n(88668),o=n(82908),a=n(74757);e.exports=function(e,t,n,i,s,u){var l=1&n,c=e.length,f=t.length;if(c!=f&&!(l&&f>c))return!1;var p=u.get(e),d=u.get(t);if(p&&d)return p==t&&d==e;var m=-1,v=!0,g=2&n?new r:void 0;for(u.set(e,t),u.set(t,e);++m<c;){var k=e[m],h=t[m];if(i)var b=l?i(h,k,m,t,e,u):i(k,h,m,e,t,u);if(void 0!==b){if(b)continue;v=!1;break}if(g){if(!o(t,(function(e,t){if(!a(g,t)&&(k===e||s(k,e,n,i,u)))return g.push(t)}))){v=!1;break}}else if(k!==h&&!s(k,h,n,i,u)){v=!1;break}}return u.delete(e),u.delete(t),v}},18351:(e,t,n)=>{var r=n(62705),o=n(11149),a=n(77813),i=n(67114),s=n(68776),u=n(21814),l=r?r.prototype:void 0,c=l?l.valueOf:void 0;e.exports=function(e,t,n,r,l,f,p){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!f(new o(e),new o(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return a(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var d=s;case"[object Set]":var m=1&r;if(d||(d=u),e.size!=t.size&&!m)return!1;var v=p.get(e);if(v)return v==t;r|=2,p.set(e,t);var g=i(d(e),d(t),r,l,f,p);return p.delete(e),g;case"[object Symbol]":if(c)return c.call(e)==c.call(t)}return!1}},16096:(e,t,n)=>{var r=n(58234),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,a,i,s){var u=1&n,l=r(e),c=l.length;if(c!=r(t).length&&!u)return!1;for(var f=c;f--;){var p=l[f];if(!(u?p in t:o.call(t,p)))return!1}var d=s.get(e),m=s.get(t);if(d&&m)return d==t&&m==e;var v=!0;s.set(e,t),s.set(t,e);for(var g=u;++f<c;){var k=e[p=l[f]],h=t[p];if(a)var b=u?a(h,k,p,t,e,s):a(k,h,p,e,t,s);if(!(void 0===b?k===h||i(k,h,n,a,s):b)){v=!1;break}g||(g="constructor"==p)}if(v&&!g){var N=e.constructor,y=t.constructor;N==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof N&&N instanceof N&&"function"==typeof y&&y instanceof y||(v=!1)}return s.delete(e),s.delete(t),v}},68776:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},90619:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},72385:e=>{e.exports=function(e){return this.__data__.has(e)}},21814:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},18446:(e,t,n)=>{var r=n(90939);e.exports=function(e,t){return r(e,t)}}}]);