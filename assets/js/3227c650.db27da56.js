(self.webpackChunk_lilib_hooks=self.webpackChunk_lilib_hooks||[]).push([[6221],{53364:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];var o=[e,t].concat(r);if(arguments.length<2)throw new TypeError("The length of `areArraysEqual`'s params must be >= 2.");if(o.some((function(e){return!Array.isArray(e)})))throw new TypeError("The params of `areArraysEqual` must be arrays.");for(var i=o[0],u=o.length,l=!0,s=1;s<u;s++)i!==o[s]&&(l=!1);if(l)return!0;for(var c=1;c<u;c++)if(i.length!==o[c].length)return!1;for(var f=1;f<u;f++)for(var p=o[f],d=i.length,v=0;v<d;v++)if(!Object.is(i[v],p[v]))return!1;return!0}},7207:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(36838),a=n.n(r),o=n(92042),i=n.n(o),u=n(44622);const l=function(e){return u.Z?i()(e)?e():a()(e)&&"current"in e?e.current:e:null}},7960:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var r=n(59496),a=n(31223),o=n.n(a),i=n(92042),u=n.n(i),l=n(50054),s=n(63339),c=n(85404),f=n(20584),p=n(67390),d=n(75776);const v=function(e,t){void 0===t&&(t=o());const n=(0,r.useRef)(e);return(0,d.Z)().current&&(t(n.current,e)||(n.current=e)),(0,r.useDebugValue)(n.current===e?"Latest":"Previous"),n.current};const m=function(e){return function(t,n){const{defaultValue:a,polling:i=!1,pollingInterval:d=100,compare:m=o(),validate:g,serialize:k=JSON.stringify,deserialize:h=JSON.parse}=n||{},b=v(a,m);function N(){try{const n=e?.getItem(t);if(null!=n){const e=h(n);return g?g(e)?e:b:e}}catch(n){console.error(n)}return b}const[y,Z]=(0,f.Z)(N),S=(0,s.Z)((n=>{Z((r=>{if(void 0===(n=u()(n)?n(r):n))return e?.removeItem(t),b;try{e?.setItem(t,k(n))}catch(a){console.error(a)}return n}))})),C=()=>{const e=N();m(e,y)||Z(e)},[x,w]=(0,c.Z)(C,d);return(0,r.useEffect)((()=>{w(),i&&x()}),[i]),(0,p.Z)((()=>window),"storage",C),(0,l.Z)((()=>{w(),Z(N()),i&&x()}),[t]),(0,l.Z)((()=>{null!=e?.getItem(t)||m(b,y)||Z(b)}),[b]),(0,r.useDebugValue)(y),(0,r.useDebugValue)(t,(t=>"(raw) "+e?.getItem(t))),[y,S]}}},25325:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(59496),a=n(7207),o=n(53364),i=n(89258);const u=function(e){return function(t,n,u){const l=(0,r.useRef)(!1),s=(0,r.useRef)([]),c=(0,r.useRef)([]),f=(0,r.useRef)();function p(){f.current?.()}e((()=>{const e=u.map(a.Z);function r(){s.current=n,c.current=e,f.current=t()}l.current?(0,o.Z)(n,s.current)&&(0,o.Z)(e,c.current)||(p(),r()):(r(),l.current=!0)})),(0,i.Z)((()=>{p(),l.current=!1}))}}},67390:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(36838),a=n.n(r),o=n(7207);const i=function(e){return!!e&&!!e.addEventListener&&!!e.removeEventListener};var u=n(63339),l=n(44088);const s=function(e,t,n,r){let s,c,f;"boolean"==typeof r?s=r:a()(r)&&(void 0!==r.capture&&(s=!!r.capture),void 0!==r.once&&(c=!!r.once),void 0!==r.passive&&(f=!!r.passive));const p=(0,u.Z)(n);(0,l.Z)((()=>{const n=(0,o.Z)(e);if(i(n))return n.addEventListener(t,p,{capture:s,once:c,passive:f}),()=>{n.removeEventListener(t,p,{capture:s})}}),[t,s,c,f],[e])}},85404:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(50174);const a=function(e,t){const[n,a]=(0,r.Z)((()=>{e(),n()}),t);return[n,a]}},75776:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(59496);const a=function(){const e=(0,r.useRef)(!1);return(0,r.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),e}},63339:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(59496),a=n(63484);const o=function(e){const t=(0,r.useRef)(),n=(0,a.Z)(e);return t.current||(t.current=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.current.apply(this,t)}),t.current}},20584:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(59496),a=n(63339),o=n(23095);const i=function(e){const t=(0,o.Z)(),[n,i]=(0,r.useState)(e);return[n,(0,a.Z)((e=>{t.current||i(e)}))]}},44088:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(59496);const a=(0,n(25325).Z)(r.useEffect)},50174:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(59496),a=n(89258),o=n(63339);const i=function(e,t){const n=(0,o.Z)(e),i=(0,r.useRef)(),u=(0,o.Z)((()=>{void 0!==i.current&&(clearTimeout(i.current),i.current=void 0)})),l=(0,o.Z)((()=>{u(),i.current=setTimeout(n,t)}));return(0,a.Z)(u),[l,u]}},89258:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(59496);const a=function(e){const t=(0,r.useRef)(e);t.current=e,(0,r.useEffect)((()=>()=>{t.current()}),[])}},23095:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(59496);const a=function(){const e=(0,r.useRef)(!1);return(0,r.useEffect)((()=>(e.current=!1,()=>{e.current=!0})),[]),e}},50054:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(59496),a=n(89258);const o=function(e){return function(t,n){const o=(0,r.useRef)(!1);e((()=>{if(o.current)return t();o.current=!0}),n),(0,a.Z)((()=>{o.current=!1}))}}(r.useEffect)},84308:(e,t,n)=>{"use strict";n.r(t),n.d(t,{assets:()=>v,contentTitle:()=>p,default:()=>k,frontMatter:()=>f,metadata:()=>d,toc:()=>m});var r=n(96600),a=n(59496),o=n(49613),i=n(65836),u=n(68892),l=n(44622);const s=(0,n(7960).Z)(l.Z?localStorage:null);const c=function(){const[e,t]=s("key",{polling:!0,defaultValue:"default value"});return a.createElement(a.Fragment,null,a.createElement("div",null,a.createElement("button",{onClick:()=>t(Math.random().toString())},"Set random value")," ",a.createElement("button",{onClick:()=>t(void 0)},"Remove")),a.createElement("div",null,"The value is: ",e))},f={},p=void 0,d={unversionedId:"useLocalStorage",id:"useLocalStorage",title:"useLocalStorage",description:"Get, set and/or remove localStorage.",source:"@site/docs/useLocalStorage.mdx",sourceDirName:".",slug:"/useLocalStorage",permalink:"/hooks/useLocalStorage",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"useCookie",permalink:"/hooks/useCookie"},next:{title:"useSessionStorage",permalink:"/hooks/useSessionStorage"}},v={},m=[{value:"API",id:"api",level:2},{value:"Example",id:"example",level:2}],g={toc:m};function k(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,r.Z)({},g,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Get, set and/or remove ",(0,o.kt)("inlineCode",{parentName:"p"},"localStorage"),"."),(0,o.kt)("h2",{id:"api"},"API"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"function useLocalStorage<T>(\n  key: string,\n  options?: {\n    defaultValue?: T;\n    polling?: boolean;\n    pollingInterval?: number;\n    compare?: (x: any, y: any) => boolean;\n    validate?: (value: any) => boolean;\n    serialize?: (value: T) => string;\n    deserialize?: (raw: string) => T;\n  }\n): [\n  value: T | undefined,\n  setLocalStorage: (\n    newValue: T | undefined | ((prevValue: T | undefined) => T | undefined)\n  ) => void\n];\n")),(0,o.kt)("p",null,"Params:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"key"),":")," ",(0,o.kt)("inlineCode",{parentName:"li"},"localStorage")," key."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"options"),":")," Options object.",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"options.defaultValue"),":")," Default value."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"options.polling"),":")," Pollingly update value. Default is ",(0,o.kt)("inlineCode",{parentName:"li"},"false"),"."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"options.pollingInterval"),":")," Polling interval time, in milliseconds. Default is ",(0,o.kt)("inlineCode",{parentName:"li"},"100"),"."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"options.compare"),":")," The comparison function in polling. Use deep comparison by default."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"options.validate"),":")," Validate the value got from ",(0,o.kt)("inlineCode",{parentName:"li"},"localStorage")," which deserialized by ",(0,o.kt)("inlineCode",{parentName:"li"},"deserialize")," function. If this function return ",(0,o.kt)("inlineCode",{parentName:"li"},"false"),", the ",(0,o.kt)("inlineCode",{parentName:"li"},"defaultValue")," will be used."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"options.serialize"),":")," Serialization function. Default is ",(0,o.kt)("inlineCode",{parentName:"li"},"JSON.stringify"),"."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"options.deserialize"),":")," Deserialization function. Default is ",(0,o.kt)("inlineCode",{parentName:"li"},"JSON.parse"),".")))),(0,o.kt)("p",null,"Results:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"value"),":")," Parsed by the deserialization function."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"setLocalStorage"),":")," Set ",(0,o.kt)("inlineCode",{parentName:"li"},"localStorage"),". If the ",(0,o.kt)("inlineCode",{parentName:"li"},"newValue")," is ",(0,o.kt)("inlineCode",{parentName:"li"},"undefined"),", return the ",(0,o.kt)("inlineCode",{parentName:"li"},"defaultValue"),".")),(0,o.kt)("h2",{id:"example"},"Example"),(0,o.kt)(u.Z,{mdxType:"ExampleBlock"},(0,o.kt)(c,{mdxType:"Example"})),(0,o.kt)(i.Z,{language:"tsx",mdxType:"CodeBlock"},'import React from "react";\nimport { useLocalStorage } from "@lilib/hooks";\n\nfunction Example() {\n  const [value, setLocalStorage] = useLocalStorage("key", {\n    polling: true,\n    defaultValue: "default value",\n  });\n\n  return (\n    <>\n      <div>\n        <button onClick={() => setLocalStorage(Math.random().toString())}>\n          Set random value\n        </button>{" "}\n        <button onClick={() => setLocalStorage(undefined)}>Remove</button>\n      </div>\n      <div>The value is: {value}</div>\n    </>\n  );\n}\n\nexport default Example;\n'))}k.isMDXComponent=!0},78188:(e,t,n)=>{var r=n(9440),a=n(96659),o=n(97230);function i(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}i.prototype.add=i.prototype.push=a,i.prototype.has=o,e.exports=i},84330:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},6620:(e,t,n)=>{var r=n(83977),a=n(55073);e.exports=function e(t,n,o,i,u){return t===n||(null==t||null==n||!a(t)&&!a(n)?t!=t&&n!=n:r(t,n,o,i,e,u))}},83977:(e,t,n)=>{var r=n(5929),a=n(22684),o=n(7456),i=n(18120),u=n(81887),l=n(24669),s=n(61563),c=n(73806),f="[object Arguments]",p="[object Array]",d="[object Object]",v=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,m,g,k){var h=l(e),b=l(t),N=h?p:u(e),y=b?p:u(t),Z=(N=N==f?d:N)==d,S=(y=y==f?d:y)==d,C=N==y;if(C&&s(e)){if(!s(t))return!1;h=!0,Z=!1}if(C&&!Z)return k||(k=new r),h||c(e)?a(e,t,n,m,g,k):o(e,t,N,n,m,g,k);if(!(1&n)){var x=Z&&v.call(e,"__wrapped__"),w=S&&v.call(t,"__wrapped__");if(x||w){var _=x?e.value():e,E=w?t.value():t;return k||(k=new r),g(_,E,n,m,k)}}return!!C&&(k||(k=new r),i(e,t,n,m,g,k))}},29880:e=>{e.exports=function(e,t){return e.has(t)}},22684:(e,t,n)=>{var r=n(78188),a=n(84330),o=n(29880);e.exports=function(e,t,n,i,u,l){var s=1&n,c=e.length,f=t.length;if(c!=f&&!(s&&f>c))return!1;var p=l.get(e),d=l.get(t);if(p&&d)return p==t&&d==e;var v=-1,m=!0,g=2&n?new r:void 0;for(l.set(e,t),l.set(t,e);++v<c;){var k=e[v],h=t[v];if(i)var b=s?i(h,k,v,t,e,l):i(k,h,v,e,t,l);if(void 0!==b){if(b)continue;m=!1;break}if(g){if(!a(t,(function(e,t){if(!o(g,t)&&(k===e||u(k,e,n,i,l)))return g.push(t)}))){m=!1;break}}else if(k!==h&&!u(k,h,n,i,l)){m=!1;break}}return l.delete(e),l.delete(t),m}},7456:(e,t,n)=>{var r=n(74396),a=n(92210),o=n(42448),i=n(22684),u=n(7523),l=n(79967),s=r?r.prototype:void 0,c=s?s.valueOf:void 0;e.exports=function(e,t,n,r,s,f,p){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!f(new a(e),new a(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var d=u;case"[object Set]":var v=1&r;if(d||(d=l),e.size!=t.size&&!v)return!1;var m=p.get(e);if(m)return m==t;r|=2,p.set(e,t);var g=i(d(e),d(t),r,s,f,p);return p.delete(e),g;case"[object Symbol]":if(c)return c.call(e)==c.call(t)}return!1}},18120:(e,t,n)=>{var r=n(69698),a=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,o,i,u){var l=1&n,s=r(e),c=s.length;if(c!=r(t).length&&!l)return!1;for(var f=c;f--;){var p=s[f];if(!(l?p in t:a.call(t,p)))return!1}var d=u.get(e),v=u.get(t);if(d&&v)return d==t&&v==e;var m=!0;u.set(e,t),u.set(t,e);for(var g=l;++f<c;){var k=e[p=s[f]],h=t[p];if(o)var b=l?o(h,k,p,t,e,u):o(k,h,p,e,t,u);if(!(void 0===b?k===h||i(k,h,n,o,u):b)){m=!1;break}g||(g="constructor"==p)}if(m&&!g){var N=e.constructor,y=t.constructor;N==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof N&&N instanceof N&&"function"==typeof y&&y instanceof y||(m=!1)}return u.delete(e),u.delete(t),m}},7523:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},96659:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},97230:e=>{e.exports=function(e){return this.__data__.has(e)}},79967:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},31223:(e,t,n)=>{var r=n(6620);e.exports=function(e,t){return r(e,t)}}}]);