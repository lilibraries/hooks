(self.webpackChunk_lilib_hooks=self.webpackChunk_lilib_hooks||[]).push([[6648],{7354:(e,n,t)=>{"use strict";t.d(n,{Z:()=>s});var a=t(7294),i=t(1296),l=t.n(i),o=t(8242),u=t(4708),r=t(8134),c=t(8298);const s=function(e,n){let t=0,i=1/0,s=!1,d=!0;"number"==typeof n?t=n:(0,c.Z)(n)&&(void 0!==n.wait&&(t=+n.wait),void 0!==n.maxWait&&(i=+n.maxWait),void 0!==n.leading&&(s=!!n.leading),void 0!==n.trailing&&(d=!!n.trailing));const p=(0,o.Z)(e),f=(0,a.useRef)();(0,a.useMemo)((()=>{var e;null==(e=f.current)||e.flush(),f.current=l()((function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return p.current.apply(this,n)}),t,{maxWait:i,leading:s,trailing:d})}),[t,i,s,d]);const g=(0,u.Z)((function(){for(var e,n=arguments.length,t=new Array(n),a=0;a<n;a++)t[a]=arguments[a];return null==(e=f.current)?void 0:e.apply(this,t)})),m=(0,u.Z)((()=>{var e;return null==(e=f.current)?void 0:e.flush()})),v=(0,u.Z)((()=>{var e;null==(e=f.current)||e.cancel()}));return(0,r.Z)(v),[g,{flush:m,cancel:v}]}},8242:(e,n,t)=>{"use strict";t.d(n,{Z:()=>i});var a=t(7294);const i=function(e){const n=(0,a.useRef)(e);return n.current=e,n}},4708:(e,n,t)=>{"use strict";t.d(n,{Z:()=>l});var a=t(7294),i=t(8242);const l=function(e){const n=(0,a.useRef)(),t=(0,i.Z)(e);return n.current||(n.current=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return t.current.apply(this,n)}),n.current}},8042:(e,n,t)=>{"use strict";t.d(n,{Z:()=>o});var a=t(7294),i=t(4708);const l=function(){const e=(0,a.useRef)(!1);return(0,a.useEffect)((()=>(e.current=!1,()=>{e.current=!0})),[]),e};const o=function(e){const n=l(),[t,o]=(0,a.useState)(e);return[t,(0,i.Z)((e=>{n.current||o(e)}))]}},6061:(e,n,t)=>{"use strict";t.d(n,{Z:()=>l});var a=t(7294),i=t(4708);const l=function(e){void 0===e&&(e=!1);const[n,t]=(0,a.useState)(!!e),l=(0,i.Z)((e=>{t(void 0!==e?!!e:e=>!e)}));return[n,{toggle:l,toggleOn:(0,i.Z)((()=>{t(!0)})),toggleOff:(0,i.Z)((()=>{t(!1)}))}]}},8134:(e,n,t)=>{"use strict";t.d(n,{Z:()=>i});var a=t(7294);const i=function(e){const n=(0,a.useRef)(e);n.current=e,(0,a.useEffect)((()=>()=>{n.current()}),[])}},2082:(e,n,t)=>{"use strict";t.d(n,{Z:()=>l});var a=t(7294),i=t(8134);const l=function(e){return function(n,t){const l=(0,a.useRef)(!1);e((()=>{if(l.current)return n();l.current=!0}),t),(0,i.Z)((()=>{l.current=!1}))}}(a.useEffect)},8298:(e,n,t)=>{"use strict";t.d(n,{Z:()=>a});const a=function(e){return"object"==typeof e&&null!==e}},7933:(e,n,t)=>{"use strict";t.r(n),t.d(n,{assets:()=>N,contentTitle:()=>b,default:()=>w,frontMatter:()=>k,metadata:()=>h,toc:()=>C});var a=t(7462),i=t(7294),l=t(3905),o=t(3066),u=t(2823),r=t(6061),c=t(2082),s=t(4708),d=t(8042),p=t(8242),f=t(7354);const g=function(e,n){const t=(0,p.Z)(e),[a,i]=(0,d.Z)(e),[l,{cancel:o}]=(0,f.Z)(i,n),u=(0,s.Z)((function(e){o(),i(arguments.length>0?e:t.current)}));return(0,c.Z)((()=>{l(e)}),[e]),[a,{flush:u,cancel:o}]};function m(){return Math.ceil(5e3*Math.random())}const v=function(){const[e,n]=(0,i.useState)(m()),[t,{toggle:a}]=(0,r.Z)(!1),[l,{toggle:o}]=(0,r.Z)(!0),[u,c]=(0,i.useState)(""),s={wait:e,leading:t,trailing:l},[d,{flush:p,cancel:f}]=g(u,s);return i.createElement(i.Fragment,null,i.createElement("p",null,"Actions:"," ",i.createElement("button",{onClick:()=>n(m())},"Change wait time")," ",i.createElement("button",{onClick:()=>a()},"Toggle leading")," ",i.createElement("button",{onClick:()=>o()},"Toggle trailing")),i.createElement("p",null,"Options:"," ","{ wait: "+e+", leading: "+t+", trailing: "+l+" }"),i.createElement("p",null,"Enter value:"," ",i.createElement("input",{value:u,onChange:e=>{c(e.target.value)}})," ",i.createElement("button",{onClick:()=>p()},"Flush")," ",i.createElement("button",{onClick:()=>p("final value")},'Flush with "final value"')," ",i.createElement("button",{onClick:f},"Cancel")),i.createElement("div",null,"Debounced value: ",d))},k={},b=void 0,h={unversionedId:"useDebouncedValue",id:"useDebouncedValue",title:"useDebouncedValue",description:"Debounce a value.",source:"@site/docs/useDebouncedValue.mdx",sourceDirName:".",slug:"/useDebouncedValue",permalink:"/hooks/useDebouncedValue",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"useThrottledValue",permalink:"/hooks/useThrottledValue"},next:{title:"useMemoizedValue",permalink:"/hooks/useMemoizedValue"}},N={},C=[{value:"API",id:"api",level:2},{value:"Example",id:"example",level:2}],Z={toc:C};function w(e){let{components:n,...t}=e;return(0,l.kt)("wrapper",(0,a.Z)({},Z,t,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"Debounce a value."),(0,l.kt)("h2",{id:"api"},"API"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function useDebouncedValue<T>(\n  value: T,\n  options?:\n    | number\n    | { wait: number; maxWait?: number; leading?: boolean; trailing?: boolean }\n): [\n  debouncedValue: T,\n  actions: {\n    flush: (finalValue?: T) => void;\n    cancel: () => void;\n  }\n];\n")),(0,l.kt)("p",null,"Params:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"strong"},"value"),":")," The value that will be changed."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"strong"},"options"),":")," Debounce wait time or an options object.",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"strong"},"options.wait"),":")," Debounce wait time, in milliseconds. Default is ",(0,l.kt)("inlineCode",{parentName:"li"},"0"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"strong"},"options.maxWait"),":")," Max wait time, in milliseconds. Default is ",(0,l.kt)("inlineCode",{parentName:"li"},"Infinity"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"strong"},"options.leading"),":")," Change debounced value on the leading edge. Default is ",(0,l.kt)("inlineCode",{parentName:"li"},"false"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"strong"},"options.trailing"),":")," Change debounced value on the trailing edge. Default is ",(0,l.kt)("inlineCode",{parentName:"li"},"true"),".")))),(0,l.kt)("p",null,"Results:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"strong"},"debouncedValue"),":")," Debounced value."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"strong"},"actions"),":")," Actions object.",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"strong"},"actions.flush"),":")," Flush funciton. The ",(0,l.kt)("inlineCode",{parentName:"li"},"finalValue")," will be returned as ",(0,l.kt)("inlineCode",{parentName:"li"},"debouncedValue")," if it is specified."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"strong"},"actions.cancel"),":")," Cancel debounce timer.")))),(0,l.kt)("h2",{id:"example"},"Example"),(0,l.kt)(u.Z,{mdxType:"ExampleBlock"},(0,l.kt)(v,{mdxType:"Example"})),(0,l.kt)(o.Z,{language:"tsx",mdxType:"CodeBlock"},'import React, { useState } from "react";\nimport { useDebouncedValue, useToggle } from "@lilib/hooks";\n\nfunction random() {\n  return Math.ceil(Math.random() * 5000);\n}\n\nfunction Example() {\n  const [wait, setWait] = useState(random());\n  const [leading, { toggle: toggleLeading }] = useToggle(false);\n  const [trailing, { toggle: toggleTrailing }] = useToggle(true);\n\n  const [value, setValue] = useState("");\n  const options = { wait, leading, trailing };\n  const [debouncedValue, { flush, cancel }] = useDebouncedValue(value, options);\n\n  return (\n    <>\n      <p>\n        Actions:{" "}\n        <button onClick={() => setWait(random())}>Change wait time</button>{" "}\n        <button onClick={() => toggleLeading()}>Toggle leading</button>{" "}\n        <button onClick={() => toggleTrailing()}>Toggle trailing</button>\n      </p>\n      <p>\n        Options:{" "}\n        {`{ wait: ${wait}, leading: ${leading}, trailing: ${trailing} }`}\n      </p>\n      <p>\n        Enter value:{" "}\n        <input\n          value={value}\n          onChange={(event) => {\n            setValue(event.target.value);\n          }}\n        />{" "}\n        <button onClick={() => flush()}>Flush</button>{" "}\n        <button onClick={() => flush("final value")}>\n          Flush with "final value"\n        </button>{" "}\n        <button onClick={cancel}>Cancel</button>\n      </p>\n      <div>Debounced value: {debouncedValue}</div>\n    </>\n  );\n}\n\nexport default Example;\n'))}w.isMDXComponent=!0},1296:(e,n,t)=>{var a=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,o=/^0o[0-7]+$/i,u=parseInt,r="object"==typeof t.g&&t.g&&t.g.Object===Object&&t.g,c="object"==typeof self&&self&&self.Object===Object&&self,s=r||c||Function("return this")(),d=Object.prototype.toString,p=Math.max,f=Math.min,g=function(){return s.Date.now()};function m(e){var n=typeof e;return!!e&&("object"==n||"function"==n)}function v(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==d.call(e)}(e))return NaN;if(m(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=m(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var t=l.test(e);return t||o.test(e)?u(e.slice(2),t?2:8):i.test(e)?NaN:+e}e.exports=function(e,n,t){var a,i,l,o,u,r,c=0,s=!1,d=!1,k=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function b(n){var t=a,l=i;return a=i=void 0,c=n,o=e.apply(l,t)}function h(e){return c=e,u=setTimeout(C,n),s?b(e):o}function N(e){var t=e-r;return void 0===r||t>=n||t<0||d&&e-c>=l}function C(){var e=g();if(N(e))return Z(e);u=setTimeout(C,function(e){var t=n-(e-r);return d?f(t,l-(e-c)):t}(e))}function Z(e){return u=void 0,k&&a?b(e):(a=i=void 0,o)}function w(){var e=g(),t=N(e);if(a=arguments,i=this,r=e,t){if(void 0===u)return h(r);if(d)return u=setTimeout(C,n),b(r)}return void 0===u&&(u=setTimeout(C,n)),o}return n=v(n)||0,m(t)&&(s=!!t.leading,l=(d="maxWait"in t)?p(v(t.maxWait)||0,n):l,k="trailing"in t?!!t.trailing:k),w.cancel=function(){void 0!==u&&clearTimeout(u),c=0,a=r=i=u=void 0},w.flush=function(){return void 0===u?o:Z(g())},w}}}]);