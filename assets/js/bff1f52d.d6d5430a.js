(self.webpackChunk_lilib_hooks=self.webpackChunk_lilib_hooks||[]).push([[3919],{7030:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(7294);const i="exampleBlock_ywu8",a=e=>{let{children:t}=e;return r.createElement("div",{className:i},t)}},8625:(e,t,n)=>{"use strict";n.d(t,{c:()=>p});var r=n(7294),i=n(7557),a=n.n(i),o=n(1688),s=n(5141);class l extends s.Z{constructor(){super(...arguments),this._ready=!0,this._records=new Map,this._maxCacheTime=l.DEFAULT_MAX_CACHE_TIME,this._defaultCacheTime=l.DEFAULT_CACHE_TIME}_checkCacheKey(e){if(null==e)throw new TypeError(`Cache key can't be null or undefined. Received: ${String(e)}.`)}_checkCacheData(e){if(void 0===e)throw new TypeError("Cache data can't be undefined.")}_setDeleteRecordTimer(e,t){let n=0;return t>0&&t<=this._maxCacheTime&&t<Number.MAX_SAFE_INTEGER&&(n=+setTimeout((()=>{this.delete(e)}),t)),n}_clearDeleteRecordTimer(e){const t=this._records.get(e);t&&t.deleteTimer&&clearTimeout(t.deleteTimer)}isReady(){return this._ready}asReady(){return this._ready||(this._ready=!0,this.emit("ready")),this}getMaxCacheTime(){return this._maxCacheTime}setMaxCacheTime(e){return this._maxCacheTime=e,this}getDefaultCacheTime(){return this._defaultCacheTime}setDefaultCacheTime(e){return this._defaultCacheTime=e,this}memorize(e,t,n){void 0===n&&(n={}),this._checkCacheKey(e),this._checkCacheData(t),this._clearDeleteRecordTimer(e);const r=Date.now(),{cacheTimestamp:i=r}=n,{cacheTime:a=this._defaultCacheTime}=n,o=i-r+a;if(o>0){const n=this._setDeleteRecordTimer(e,o);this._records.set(e,{data:t,cacheTime:a,deleteTimer:n,cacheTimestamp:i})}else this._records.delete(e);return this}set(e,t,n){void 0===n&&(n={}),this._checkCacheKey(e),this._checkCacheData(t),this._clearDeleteRecordTimer(e);const{cacheTime:r=this._defaultCacheTime}=n;return r>0?(this._records.set(e,{data:t,cacheTime:r,deleteTimer:this._setDeleteRecordTimer(e,r),cacheTimestamp:Date.now()}),this.for(e).emit("set",t),this.emit("set",e,t)):this.delete(e),this}has(e){return this._records.has(e)}get(e){return this._records.get(e)?.data}getCacheTime(e){return this._records.get(e)?.cacheTime}getCacheTimestamp(e){return this._records.get(e)?.cacheTimestamp}delete(e){const t=this._records.get(e);return t&&(this._clearDeleteRecordTimer(e),this._records.delete(e),this.for(e).emit("delete",t.data),this.emit("delete",e,t.data)),this}clear(){const e=new Map(this._records);this._records.clear();for(const[t,n]of e)n.deleteTimer&&clearTimeout(n.deleteTimer),this.for(t).emit("delete",n.data),this.emit("delete",t,n.data);return this.emit("clear"),this}}l.DEFAULT_CACHE_TIME=3e5,l.DEFAULT_MAX_CACHE_TIME=Number.MAX_SAFE_INTEGER;const c=l;var u=n(4819);const d=globalThis,m="__LILIB_HOOKS_GLOBAL_CACHE__",h={global:!1,cacheTime:3e5,cacheSync:!1},f=(0,r.createContext)({...h,cache:new c}),p=()=>(0,r.useContext)(f),g=e=>{const t=p(),n=(0,r.useRef)();let i=a()(e,"inherit","children");i=e.inherit?(0,u.Z)(t,i):(0,u.Z)(h,i),i.global&&d[m]&&(i.cache=d[m]),i.cache||(n.current||(n.current=new c),i.cache=n.current),i.global&&!d[m]&&(d[m]=i.cache);const s=i.cache,l=(0,r.useCallback)((e=>s.isReady()?()=>{}:(s.once("ready",e),()=>{s.off("ready",e)})),[s]),g=(0,r.useCallback)((()=>s.isReady()),[s]),_=(0,o.useSyncExternalStore)(l,g);return(0,r.useDebugValue)(_?"Ready":"Unready"),(0,r.useDebugValue)(i),r.createElement(f.Provider,{value:i},_?e.children:i.fallback)};g.Context=f,g.useConfig=p},6890:(e,t,n)=>{"use strict";n.d(t,{u:()=>h});var r=n(7294),i=n(7557),a=n.n(i),o=n(5141),s=n(4819);class l extends o.Z{constructor(){super(...arguments),this._loadings=new Map,this._reloaders=new Map,this._timestamps=new Map}isLoading(e,t){return t?this._loadings.get(e)===t:this._loadings.has(e)}setLoading(e,t){this._loadings.set(e,t)}deleteLoading(e,t){t?this._loadings.get(e)===t&&this._loadings.delete(e):this._loadings.delete(e)}getReloaders(e){return this._reloaders.get(e)||[]}addReloader(e,t){const n=this._reloaders.get(e);n?n.includes(t)||n.push(t):this._reloaders.set(e,[t])}removeReloader(e,t){const n=this._reloaders.get(e);if(n){const r=n.lastIndexOf(t);r>=0&&n.splice(r,1),n.length||this._reloaders.delete(e)}}getTimestamp(e){return this._timestamps.get(e)}setTimestamp(e){this._timestamps.set(e,Date.now())}deleteTimestamp(e){this._timestamps.has(e)&&this._timestamps.delete(e)}}const c=globalThis,u="__LILIB_HOOKS_GLOBAL_LOAD_STORE__",d={global:!1,cacheTime:3e5,staleTime:0,retry:!1,retryLimit:3,retryInterval:0,fallbackRetry:!1,fallbackRetryLimit:3,fallbackRetryInterval:0,polling:!1,pollingInterval:3e4,pollingInPageHiding:!1,pollingIntervalInPageHiding:6e4,autoReloadWaitTime:1e4,autoReloadOnPageShow:!1,autoReloadOnWindowFocus:!1,autoReloadOnNetworkReconnect:!1},m=(0,r.createContext)({...d,store:new l}),h=()=>(0,r.useContext)(m),f=e=>{const t=h(),n=(0,r.useRef)();let i=a()(e,"inherit","children");return i=e.inherit?(0,s.Z)(t,i):(0,s.Z)(d,i),i.global&&c[u]&&(i.store=c[u]),i.store||(n.current||(n.current=new l),i.store=n.current),i.global&&!c[u]&&(c[u]=i.store),(0,r.useDebugValue)(i),r.createElement(m.Provider,{value:i},e.children)};f.Context=m,f.useConfig=h},8242:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7294);const i=function(e){const t=(0,r.useRef)(e);return t.current=e,t}},6546:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});n(6308);var r=n(7294),i=n(3218),a=n.n(i),o=n(3560),s=n.n(o),l=n(2844),c=n(4708),u=n(8134),d=n(6355),m=n(2230),h=n(8242),f=n(9601),p=n(2767),g=n(1665);const _=function(){return!g.Z||"visible"===document.visibilityState};var v=n(4819),k=n(8625),b=n(6890);const y=function(e,t,n){void 0===t&&(t=[]),void 0===n&&(n={});const{cache:i}=(0,k.c)(),{store:o,...g}=(0,b.u)(),{key:y,idle:T,imperative:E,independent:w,fallback:C,initialData:N,defaultParams:R,cacheKey:L,cacheTime:x,cacheValidate:Z,staleTime:I,retry:S,retryLimit:D,retryInterval:A,fallbackRetry:P,fallbackRetryLimit:F,fallbackRetryInterval:M,polling:O,pollingInterval:W,pollingInPageHiding:q,pollingIntervalInPageHiding:H,autoReloadWaitTime:K,autoReloadOnPageShow:j,autoReloadOnWindowFocus:U,autoReloadOnNetworkReconnect:X}=(0,v.Z)(g,n),B=null!=y&&!w,$=(0,c.Z)((()=>{if(null!=L&&i.has(L)){const e=i.get(L);return Z?Z(e)?e:N:e}return N})),[V,z]=(0,d.Z)((()=>({data:null!=L?$():N,error:null,loading:!E}))),G=(0,f.Z)(),Y=(0,p.Z)(),J=(0,h.Z)(e),Q=(0,h.Z)(C),ee=(0,r.useRef)(0),te=(0,r.useRef)(!1),ne=(0,r.useRef)(!1),re=(0,r.useRef)(),ie=(0,r.useRef)(),ae=(0,r.useRef)(),oe=(0,r.useRef)(0),se=(0,r.useRef)(0),le=(0,r.useRef)(0),ce=(0,c.Z)((()=>{if(ee.current++,te.current=!1,clearTimeout(se.current),clearTimeout(le.current),ke(),cancelIdleCallback(oe.current),ie.current){const{key:e,store:t}=ie.current;t.isLoading(e,he)&&(t.deleteLoading(e,he),t.for(e).emit("cancel")),ie.current=void 0}ae.current&&(ae.current(),ae.current=void 0)})),ue=(0,c.Z)(((e,t)=>{n.onSuccess?n.onSuccess(e):g.onSuccess&&g.onSuccess(e,t),g.handleSuccess&&g.handleSuccess(e,t)})),de=(0,c.Z)(((e,t)=>{n.onFailure?n.onFailure(e):g.onFailure&&g.onFailure(e,t),g.handleFailure&&g.handleFailure(e,t)})),me=(0,c.Z)((e=>{n.onFinally?n.onFinally():g.onFinally&&g.onFinally(e),g.handleFinally&&g.handleFinally(e)})),he=(0,c.Z)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];ce(),te.current=!0,re.current=t;let r,l=ne.current;if(l&&(o.deleteTimestamp(he),ne.current=!1),!G.current)return new Promise((()=>{}));if(!l&&I>0&&null==V.error&&void 0!==V.data){const e=o.getTimestamp(he);if(e&&Date.now()-e<=I)return V.loading&&z({loading:!1}),new Promise((e=>{e(V.data)}))}B&&!o.isLoading(y)&&(o.setLoading(y,he),ie.current={key:y,load:he,store:o}),void 0===V.data&&null!=L&&i.has(L)&&(r=$())?z({data:r,loading:!0}):V.loading||z({loading:!0});const c=ee.current,u=()=>c!==ee.current,d=()=>{te.current&&(_()?O&&(le.current=+setTimeout((()=>{u()||pe()}),W)):q&&(le.current=+setTimeout((()=>{u()||pe()}),H)))};return B&&o.isLoading(y)&&!o.isLoading(y,he)?new Promise(((e,t)=>{const n=()=>{ae.current=void 0,o.for(y).off("cancel",r),o.for(y).off("failure",a),o.for(y).off("success",i)},r=()=>{n(),u()||pe()},i=t=>{n(),u()||e(t)},a=e=>{n(),u()||t(e)};ae.current=n,o.for(y).on("cancel",r),o.for(y).on("failure",a),o.for(y).on("success",i)})).then((e=>u()?new Promise((()=>{})):(ue(e,y),me(y),d(),e)),(e=>{if(u())return new Promise((()=>{}));throw de(e,y),me(y),d(),e})):new Promise(((e,n)=>{let r=0,i=!1,o=0;const l=a=>{if(!u())if(S&&++r<=D){const n=s()(A)?A(r):A;n>0?se.current=+setTimeout((()=>{u()||J.current(...t).then(e,l)}),n):J.current(...t).then(e,l)}else if(Q.current&&!i)i=!0,Q.current(...t).then(e,l);else if(Q.current&&i&&P&&++o<=F){const r=s()(M)?M(o):M;r>0?se.current=+setTimeout((()=>{u()||(Q.current?Q.current(...t).then(e,l):n(a))}),r):Q.current(...t).then(e,l)}else n(a)};T?oe.current=requestIdleCallback((()=>{u()||J.current(...t).then(e,l)}),a()(T)?T:void 0):J.current(...t).then(e,l)})).then((e=>u()?new Promise((()=>{})):(I>0&&o.setTimestamp(he),null!=L&&i.set(L,e,{cacheTime:x}),B&&o.isLoading(y,he)&&(o.deleteLoading(y,he),o.for(y).emit("success",e),ie.current=void 0),z({data:e,error:null,loading:!1}),ue(e,y),me(y),d(),e)),(e=>{if(u())return new Promise((()=>{}));throw B&&o.isLoading(y,he)&&(o.deleteLoading(y,he),o.for(y).emit("failure",e),ie.current=void 0),z({error:e,loading:!1}),de(e,y),me(y),d(),e}))})),fe=(0,c.Z)((function(){return ne.current=!0,he(...arguments)})),pe=(0,c.Z)((e=>{const t=re.current||R;ne.current=!!e&&!!e.force,t?he(...t):he()})),ge=(0,c.Z)((e=>{z((t=>({data:s()(e)?e(t.data):e})))})),_e=(0,c.Z)((()=>{ce(),ne.current=!1,!Y.current&&V.loading&&z({loading:!1})})),[ve,{cancel:ke}]=(0,m.Z)((()=>{te.current&&!V.loading&&pe()}),{wait:K,leading:!0,trailing:!1});return(0,r.useEffect)((()=>{if(j||O||q){const e=()=>{_()?(j||O)&&ve():q&&ve()};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}}}),[j,O,q,ve]),(0,r.useEffect)((()=>{if(U)return window.addEventListener("focus",ve),()=>{window.removeEventListener("focus",ve)}}),[U,ve]),(0,r.useEffect)((()=>{if(X)return window.addEventListener("online",ve),()=>{window.removeEventListener("online",ve)}}),[X,ve]),(0,r.useEffect)((()=>{if(B){const e=e=>{ie.current&&ie.current.load===he||(I>0&&o.setTimestamp(he),z({data:e,error:null,loading:!1}))},t=e=>{ie.current&&ie.current.load===he||z({error:e,loading:!1})};return o.for(y).on("success",e),o.for(y).on("failure",t),()=>{o.for(y).off("success",e),o.for(y).off("failure",t)}}}),[y,B,o,he,I,z]),(0,r.useEffect)((()=>{if(null!=y)return o.addReloader(y,pe),()=>{o.removeReloader(y,pe)}}),[y,o,pe]),(0,r.useEffect)((()=>()=>{o.deleteTimestamp(he)}),[o,he]),(0,r.useEffect)((()=>{E||pe()}),t),(0,l.Z)((()=>{0}),[y]),(0,u.Z)(_e),(0,r.useDebugValue)(V),{load:he,force:fe,reload:pe,update:ge,cancel:_e,...V,reloading:V.loading&&void 0!==V.data,initializing:V.loading&&void 0===V.data}}},9601:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7294);const i=function(){const e=(0,r.useRef)(!1);return(0,r.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),e}},4708:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(7294),i=n(8242);const a=function(e){const t=(0,r.useRef)(),n=(0,i.Z)(e);return t.current||(t.current=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.current.apply(this,t)}),t.current}},5912:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(7294),i=n(4708),a=n(2767);const o=function(e){const t=(0,a.Z)(),[n,o]=(0,r.useState)(e);return[n,(0,i.Z)((e=>{t.current||o(e)}))]}},6355:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(3560),i=n.n(r),a=n(4708),o=n(5912);const s=function(e){const[t,n]=(0,o.Z)(e);return[t,(0,a.Z)((e=>{n((t=>{const n=i()(e)?e(t):e;return{...t,...n}}))}))]}},2230:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(7294),i=n(3218),a=n.n(i),o=n(3493),s=n.n(o),l=n(4708),c=n(8134),u=n(8242);const d=function(e,t){let n=0,i=!1,o=!0;"number"==typeof t?n=t:a()(t)&&(void 0!==t.wait&&(n=+t.wait),void 0!==t.leading&&(i=!!t.leading),void 0!==t.trailing&&(o=!!t.trailing));const d=(0,u.Z)(e),m=(0,r.useRef)();(0,r.useMemo)((()=>{m.current?.flush(),m.current=s()((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d.current.apply(this,t)}),n,{leading:i,trailing:o})}),[n,i,o]);const h=(0,l.Z)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return m.current?.apply(this,t)})),f=(0,l.Z)((()=>m.current?.flush())),p=(0,l.Z)((()=>{m.current?.cancel()}));return(0,c.Z)(p),[h,{flush:f,cancel:p}]}},8134:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7294);const i=function(e){const t=(0,r.useRef)(e);t.current=e,(0,r.useEffect)((()=>()=>{t.current()}),[])}},2767:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7294);const i=function(){const e=(0,r.useRef)(!1);return(0,r.useEffect)((()=>(e.current=!1,()=>{e.current=!0})),[]),e}},2844:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(7294),i=n(8134);const a=function(e){return function(t,n){const a=(0,r.useRef)(!1);e((()=>{if(a.current)return t();a.current=!0}),n),(0,i.Z)((()=>{a.current=!1}))}}(r.useEffect)},5141:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(7037),i=n.n(r),a=n(3448),o=n.n(a),s=n(3560),l=n.n(s);class c{constructor(){this._topEmitter=null,this._parentEmitter=null,this._emitters=new Map,this._listeners=Object.create(null),this._maxListeners=c.DEFAULT_MAX_LISTENERS}_checkEventName(e){if(this._topEmitter)this._topEmitter._checkEventName(e);else{if(!i()(e)&&!o()(e))throw new TypeError(`Event name must be a string or a symbol. Received: ${typeof e}.`);if(""===e)throw new TypeError("Event name can not be an empty string.")}}_checkEventListener(e){if(this._topEmitter)this._topEmitter._checkEventListener(e);else if(!l()(e))throw new TypeError(`Event listener must be a function. Received: ${typeof e}.`)}_attach(){if(this._parentEmitter){const e=this._parentEmitter._emitters;e.has(this._forKey)||e.set(this._forKey,this),this._parentEmitter._attach()}}_prune(){this._parentEmitter&&(this._emitters.size||this.getListenersCount()||(this._parentEmitter._emitters.delete(this._forKey),this._parentEmitter._prune()))}getMaxListeners(){return this._topEmitter?this._topEmitter._maxListeners:this._maxListeners}setMaxListeners(e){return this._topEmitter?this._topEmitter.setMaxListeners(e):this._maxListeners=e,this}for(e){let t=this._emitters.get(e);return t||(t=new c,t._forKey=e,t._topEmitter=this._topEmitter||this,t._parentEmitter=this),t}on(e,t){this._checkEventName(e),this._checkEventListener(t);let n=this._listeners[e];return n?n.push(t):n=this._listeners[e]=[t],this._attach(),this}once(e,t){var n=this;this._checkEventName(e),this._checkEventListener(t);const r=function(){n.off(e,r.__RAW_LISTENER__),r.__RAW_LISTENER__(...arguments)};return r.__RAW_LISTENER__=t,this.on(e,r),this}off(e,t){this._checkEventName(e),this._checkEventListener(t);const n=this._listeners[e];if(n){let r=-1;for(let e=n.length-1;e>=0;e--)if(n[e]===t||n[e].__RAW_LISTENER__===t){r=e;break}r>=0&&n.splice(r,1),0===n.length&&delete this._listeners[e]}return this._prune(),this}emit(e){this._checkEventName(e);let t=this._listeners[e];if(t){t=[...t];for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(let e=0;e<t.length;e++)try{t[e](...r)}catch(a){console.error(a)}}return this}getEventNames(){return[...Object.getOwnPropertyNames(this._listeners),...Object.getOwnPropertySymbols(this._listeners)]}getListeners(e){return this._checkEventName(e),(this._listeners[e]||[]).map((e=>e.__RAW_LISTENER__||e))}getListenersCount(e){let t=0;return void 0!==e?(this._checkEventName(e),t=this._listeners[e]?.length||0):this.getEventNames().forEach((e=>{t+=this._listeners[e]?.length||0})),t}removeAllListeners(e){return void 0!==e?(this._checkEventName(e),delete this._listeners[e]):this._listeners=Object.create(null),this._prune(),this}}c.DEFAULT_MAX_LISTENERS=100;const u=c},1665:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=!("undefined"==typeof window||!window.document||!window.document.createElement)},4819:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(3706),i=n.n(r);const a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()({},...t,((e,t)=>void 0===t?e:t))}},2733:(e,t,n)=>{"use strict";n.r(t),n.d(t,{assets:()=>g,contentTitle:()=>f,default:()=>k,frontMatter:()=>h,metadata:()=>p,toc:()=>_});var r=n(7462),i=n(7294),a=n(3905),o=n(814),s=n(7030),l=n(6546);const c={key:void 0,imperative:!0,independent:!0,initialData:void 0,defaultParams:void 0,cacheKey:void 0,staleTime:0,polling:!1,pollingInPageHiding:!1,autoReloadOnPageShow:!1,autoReloadOnWindowFocus:!1,autoReloadOnNetworkReconnect:!1};const u=function(e,t){const{force:n,loading:r}=(0,l.Z)(e,[],{...t,...c});return{submit:n,submitting:r}},d=()=>new Promise((e=>{setTimeout((()=>{e(Math.random())}),1e3)}));const m=function(){const{data:e,loading:t,update:n,reload:r}=(0,l.Z)(d),{submit:a,submitting:o}=u(d,{onSuccess:e=>{n(e),r()}});return i.createElement("div",null,i.createElement("button",{onClick:()=>a()},o?"Submitting":"Submit"),"Number: ",e," ",t?"(Loading...)":"")},h={},f=void 0,p={unversionedId:"useSubmit",id:"useSubmit",title:"useSubmit",description:"This hook is based on useLoad. It reduces many functions for convenience, and it only supports a few options. Specially, it will never execute automatically. This hook is usually used for network requests such as creating, updating and deleting, but not reading. The LoadConfig component can only set some of the options listed below for this hook.",source:"@site/docs/useSubmit.mdx",sourceDirName:".",slug:"/useSubmit",permalink:"/hooks/useSubmit",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"useReload",permalink:"/hooks/useReload"},next:{title:"LoadConfig",permalink:"/hooks/LoadConfig"}},g={},_=[{value:"API",id:"api",level:2},{value:"Example",id:"example",level:2}],v={toc:_};function k(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},v,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"This hook is based on ",(0,a.kt)("a",{parentName:"p",href:"./useLoad"},(0,a.kt)("inlineCode",{parentName:"a"},"useLoad")),". It reduces many functions for convenience, and it only supports a few options. Specially, it will never execute automatically. This hook is usually used for network requests such as creating, updating and deleting, but not reading. The ",(0,a.kt)("a",{parentName:"p",href:"./LoadConfig"},(0,a.kt)("inlineCode",{parentName:"a"},"LoadConfig"))," component can only set some of the options listed below for this hook."),(0,a.kt)("h2",{id:"api"},"API"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"type PromiseResolve<T extends Promise<any>> = T extends Promise<infer P>\n  ? P\n  : never;\ntype LoadCallback = (...args: any[]) => Promise<any>;\ntype LoadData<T extends LoadCallback> = PromiseResolve<ReturnType<T>>;\n\nfunction useSubmit<Callback extends LoadCallback>(\n  callback: Callback,\n  options?: {\n    idle?: boolean;\n    fallback?: Callback;\n\n    retry?: boolean;\n    retryLimit?: number;\n    retryInterval?: number | ((count: number) => number);\n    fallbackRetry?: boolean;\n    fallbackRetryLimit?: number;\n    fallbackRetryInterval?: number | ((count: number) => number);\n\n    onSuccess?: (data: LoadData<Callback>) => void;\n    onFailure?: (error: any) => void;\n    onFinally?: () => void;\n  }\n): {\n  submitting: boolean;\n  submit: (...params: Parameters<Callback>) => ReturnType<Callback>;\n};\n")),(0,a.kt)("p",null,"Params:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"callback"),":")," A function returns a promise object."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"options"),":")," Options object.",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"options.idle"),":")," Run callback during the browser's idle periods. You can set an object contains a ",(0,a.kt)("inlineCode",{parentName:"li"},"timeout")," property to limit the max waiting time."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"options.fallback"),":")," When the ",(0,a.kt)("inlineCode",{parentName:"li"},"callback")," function reject an error and the count of retries has been exhausted, the ",(0,a.kt)("inlineCode",{parentName:"li"},"fallback")," function will be called."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"options.retry"),":")," Enable retry callback. Default is ",(0,a.kt)("inlineCode",{parentName:"li"},"false"),"."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"options.retryLimit"),":")," Callback retry limit. Default is ",(0,a.kt)("inlineCode",{parentName:"li"},"3"),"."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"options.retryInterval"),":")," Callback retry interval. Default is ",(0,a.kt)("inlineCode",{parentName:"li"},"0"),". You can set a function that returns a number value for this option, for example ",(0,a.kt)("inlineCode",{parentName:"li"},"(count) => Math.pow(2, count)"),"."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"options.fallbackRetry"),":")," Enable retry fallback. Default is ",(0,a.kt)("inlineCode",{parentName:"li"},"false"),"."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"options.fallbackRetryLimit"),":")," Fallback retry limit. Default is ",(0,a.kt)("inlineCode",{parentName:"li"},"3"),"."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"options.fallbackRetryInterval"),":")," Fallback retry interval. It also can be a function."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"options.onSuccess"),":")," Success event."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"options.onFailure"),":")," Failure event."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"options.onFinally"),":")," Finally event.")))),(0,a.kt)("p",null,"Results:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"submitting"),":")," Submitting state. Initial value is ",(0,a.kt)("inlineCode",{parentName:"li"},"false"),"."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"submit"),":")," Submit function. Used in the same way as the ",(0,a.kt)("inlineCode",{parentName:"li"},"callback"),".")),(0,a.kt)("h2",{id:"example"},"Example"),(0,a.kt)(s.Z,{mdxType:"ExampleBlock"},(0,a.kt)(m,{mdxType:"Example"})),(0,a.kt)(o.Z,{language:"tsx",mdxType:"CodeBlock"},'import React from "react";\nimport { useLoad, useSubmit } from "@lilib/hooks";\n\nconst getNumber = () => {\n  return new Promise<number>((resolve) => {\n    setTimeout(() => {\n      resolve(Math.random());\n    }, 1000);\n  });\n};\n\nfunction Example() {\n  const { data, loading, update, reload } = useLoad(getNumber);\n\n  const { submit, submitting } = useSubmit(getNumber, {\n    onSuccess: (result) => {\n      update(result);\n      reload();\n    },\n  });\n\n  return (\n    <div>\n      <button onClick={() => submit()}>\n        {submitting ? "Submitting" : "Submit"}\n      </button>\n      Number: {data} {loading ? "(Loading...)" : ""}\n    </div>\n  );\n}\n\nexport default Example;\n'))}k.isMDXComponent=!0},7561:(e,t,n)=>{var r=n(7990),i=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(i,""):e}},7990:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},3279:(e,t,n)=>{var r=n(3218),i=n(7771),a=n(4841),o=Math.max,s=Math.min;e.exports=function(e,t,n){var l,c,u,d,m,h,f=0,p=!1,g=!1,_=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function v(t){var n=l,r=c;return l=c=void 0,f=t,d=e.apply(r,n)}function k(e){return f=e,m=setTimeout(y,t),p?v(e):d}function b(e){var n=e-h;return void 0===h||n>=t||n<0||g&&e-f>=u}function y(){var e=i();if(b(e))return T(e);m=setTimeout(y,function(e){var n=t-(e-h);return g?s(n,u-(e-f)):n}(e))}function T(e){return m=void 0,_&&l?v(e):(l=c=void 0,d)}function E(){var e=i(),n=b(e);if(l=arguments,c=this,h=e,n){if(void 0===m)return k(h);if(g)return clearTimeout(m),m=setTimeout(y,t),v(h)}return void 0===m&&(m=setTimeout(y,t)),d}return t=a(t)||0,r(n)&&(p=!!n.leading,u=(g="maxWait"in n)?o(a(n.maxWait)||0,t):u,_="trailing"in n?!!n.trailing:_),E.cancel=function(){void 0!==m&&clearTimeout(m),f=0,l=h=c=m=void 0},E.flush=function(){return void 0===m?d:T(i())},E}},7771:(e,t,n)=>{var r=n(5639);e.exports=function(){return r.Date.now()}},3493:(e,t,n)=>{var r=n(3279),i=n(3218);e.exports=function(e,t,n){var a=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return i(n)&&(a="leading"in n?!!n.leading:a,o="trailing"in n?!!n.trailing:o),r(e,t,{leading:a,maxWait:t,trailing:o})}},4841:(e,t,n)=>{var r=n(7561),i=n(3218),a=n(3448),o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return NaN;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=s.test(e);return n||l.test(e)?c(e.slice(2),n?2:8):o.test(e)?NaN:+e}},6308:(e,t,n)=>{var r,i,a;i=[],void 0===(a="function"==typeof(r=function(){"use strict";var e,t,r,i,a="undefined"!=typeof window?window:null!=typeof n.g?n.g:this||{},o=a.cancelRequestAnimationFrame&&a.requestAnimationFrame||setTimeout,s=a.cancelRequestAnimationFrame||clearTimeout,l=[],c=0,u=!1,d=7,m=35,h=125,f=0,p=0,g=0,_={get didTimeout(){return!1},timeRemaining:function(){var e=d-(Date.now()-p);return e<0?0:e}},v=k((function(){d=22,h=66,m=0}));function k(e){var t,n,r=99,i=function(){var a=Date.now()-n;a<r?t=setTimeout(i,r-a):(t=null,e())};return function(){n=Date.now(),t||(t=setTimeout(i,r))}}function b(){u&&(i&&s(i),r&&clearTimeout(r),u=!1)}function y(){125!=h&&(d=7,h=125,m=35,u&&(b(),w())),v()}function T(){i=null,r=setTimeout(C,0)}function E(){r=null,o(T)}function w(){u||(t=h-(Date.now()-p),e=Date.now(),u=!0,m&&t<m&&(t=m),t>9?r=setTimeout(E,t):(t=0,E()))}function C(){var n,i,a,o=d>9?9:1;if(p=Date.now(),u=!1,r=null,c>2||p-t-50<e)for(i=0,a=l.length;i<a&&_.timeRemaining()>o;i++)n=l.shift(),g++,n&&n(_);l.length?w():c=0}function N(e){return f++,l.push(e),w(),f}function R(e){var t=e-1-g;l[t]&&(l[t]=null)}if(a.requestIdleCallback&&a.cancelIdleCallback)try{a.requestIdleCallback((function(){}),{timeout:0})}catch(L){!function(e){var t,n;if(a.requestIdleCallback=function(t,n){return n&&"number"==typeof n.timeout?e(t,n.timeout):e(t)},a.IdleCallbackDeadline&&(t=IdleCallbackDeadline.prototype)){if(!(n=Object.getOwnPropertyDescriptor(t,"timeRemaining"))||!n.configurable||!n.get)return;Object.defineProperty(t,"timeRemaining",{value:function(){return n.get.call(this)},enumerable:!0,configurable:!0})}}(a.requestIdleCallback)}else a.requestIdleCallback=N,a.cancelIdleCallback=R,a.document&&document.addEventListener&&(a.addEventListener("scroll",y,!0),a.addEventListener("resize",y),document.addEventListener("focus",y,!0),document.addEventListener("mouseover",y,!0),["click","keypress","touchstart","mousedown"].forEach((function(e){document.addEventListener(e,y,{capture:!0,passive:!0})})),a.MutationObserver&&new MutationObserver(y).observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0}));return{request:N,cancel:R}})?r.apply(t,i):r)||(e.exports=a)}}]);