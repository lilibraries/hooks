(self.webpackChunk_lilib_hooks=self.webpackChunk_lilib_hooks||[]).push([[4269],{7354:(e,n,t)=>{"use strict";t.d(n,{Z:()=>s});var a=t(7294),i=t(1296),l=t.n(i),o=t(8242),r=t(4708),u=t(8134),c=t(8298);const s=function(e,n){let t=0,i=1/0,s=!1,d=!0;"number"==typeof n?t=n:(0,c.Z)(n)&&(void 0!==n.wait&&(t=+n.wait),void 0!==n.maxWait&&(i=+n.maxWait),void 0!==n.leading&&(s=!!n.leading),void 0!==n.trailing&&(d=!!n.trailing));const p=(0,o.Z)(e),g=(0,a.useRef)();(0,a.useMemo)((()=>{var e;null==(e=g.current)||e.flush(),g.current=l()((function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return p.current.apply(this,n)}),t,{maxWait:i,leading:s,trailing:d})}),[t,i,s,d]);const m=(0,r.Z)((function(){for(var e,n=arguments.length,t=new Array(n),a=0;a<n;a++)t[a]=arguments[a];return null==(e=g.current)?void 0:e.apply(this,t)})),f=(0,r.Z)((()=>{var e;return null==(e=g.current)?void 0:e.flush()})),k=(0,r.Z)((()=>{var e;null==(e=g.current)||e.cancel()}));return(0,u.Z)(k),[m,{flush:f,cancel:k}]}},8242:(e,n,t)=>{"use strict";t.d(n,{Z:()=>i});var a=t(7294);const i=function(e){const n=(0,a.useRef)(e);return n.current=e,n}},4708:(e,n,t)=>{"use strict";t.d(n,{Z:()=>l});var a=t(7294),i=t(8242);const l=function(e){const n=(0,a.useRef)(),t=(0,i.Z)(e);return n.current||(n.current=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return t.current.apply(this,n)}),n.current}},6061:(e,n,t)=>{"use strict";t.d(n,{Z:()=>l});var a=t(7294),i=t(4708);const l=function(e){void 0===e&&(e=!1);const[n,t]=(0,a.useState)(!!e),l=(0,i.Z)((e=>{t(void 0!==e?!!e:e=>!e)}));return[n,{toggle:l,toggleOn:(0,i.Z)((()=>{t(!0)})),toggleOff:(0,i.Z)((()=>{t(!1)}))}]}},8134:(e,n,t)=>{"use strict";t.d(n,{Z:()=>i});var a=t(7294);const i=function(e){const n=(0,a.useRef)(e);n.current=e,(0,a.useEffect)((()=>()=>{n.current()}),[])}},2082:(e,n,t)=>{"use strict";t.d(n,{Z:()=>i});var a=t(7294);const i=function(e){return function(n,t){const i=(0,a.useRef)(!1);e((()=>{if(i.current)return n();i.current=!0}),t)}}(a.useEffect)},8298:(e,n,t)=>{"use strict";t.d(n,{Z:()=>a});const a=function(e){return"object"==typeof e&&null!==e}},6712:(e,n,t)=>{"use strict";t.r(n),t.d(n,{assets:()=>k,contentTitle:()=>m,default:()=>h,frontMatter:()=>g,metadata:()=>f,toc:()=>b});var a=t(7462),i=t(7294),l=t(3905),o=t(3066),r=t(2823),u=t(6061),c=t(7354),s=t(2082);function d(){return Math.ceil(5e3*Math.random())}const p=function(){const[e,n]=(0,i.useState)(d()),[t,{toggle:a}]=(0,u.Z)(!1),[l,{toggle:o}]=(0,u.Z)(!0),[r,p]=(0,i.useState)(""),[g,m]=(0,i.useState)(""),[f,{flush:k,cancel:b}]=(0,c.Z)((()=>{m(r)}),{wait:e,leading:t,trailing:l});return(0,s.Z)(f,[r]),i.createElement(i.Fragment,null,i.createElement("p",null,"Actions:"," ",i.createElement("button",{onClick:()=>n(d())},"Change wait time")," ",i.createElement("button",{onClick:()=>a()},"Toggle leading")," ",i.createElement("button",{onClick:()=>o()},"Toggle trailing")),i.createElement("p",null,"Options:"," ","{ wait: "+e+", leading: "+t+", trailing: "+l+" }"),i.createElement("p",null,"Enter value:"," ",i.createElement("input",{value:r,onChange:e=>{p(e.target.value)}})," ",i.createElement("button",{onClick:k},"Flush")," ",i.createElement("button",{onClick:b},"Cancel")),i.createElement("div",null,"Debounced value: ",g))},g={},m=void 0,f={unversionedId:"useDebounce",id:"useDebounce",title:"useDebounce",description:"Use debounced callback.",source:"@site/docs/useDebounce.mdx",sourceDirName:".",slug:"/useDebounce",permalink:"/hooks/useDebounce",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"useThrottle",permalink:"/hooks/useThrottle"},next:{title:"useRaf",permalink:"/hooks/useRaf"}},k={},b=[{value:"API",id:"api",level:2},{value:"Example",id:"example",level:2}],v={toc:b};function h(e){let{components:n,...t}=e;return(0,l.kt)("wrapper",(0,a.Z)({},v,t,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"Use debounced callback."),(0,l.kt)("h2",{id:"api"},"API"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function useDebounce<T extends (...args: any[]) => any>(\n  callback: T,\n  options?:\n    | number\n    | { wait?: number; maxWait?: number; leading?: boolean; trailing?: boolean }\n): [\n  debouncedCallback: (...args: Parameters<T>) => ReturnType<T> | undefined,\n  actions: {\n    flush: () => ReturnType<T> | undefined;\n    cancel: () => void;\n  }\n];\n")),(0,l.kt)("p",null,"Params:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"strong"},"callback"),":")," Original callback function."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"strong"},"options"),":")," Debounce wait time or an options object.",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"strong"},"options.wait"),":")," Debounce wait time, in milliseconds. Default is ",(0,l.kt)("inlineCode",{parentName:"li"},"0"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"strong"},"options.maxWait"),":")," Max wait time, in milliseconds. Default is ",(0,l.kt)("inlineCode",{parentName:"li"},"Infinity"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"strong"},"options.leading"),":")," Run callback on the leading edge. Default is ",(0,l.kt)("inlineCode",{parentName:"li"},"false"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"strong"},"options.trailing"),":")," Run callback on the trailing edge. Default is ",(0,l.kt)("inlineCode",{parentName:"li"},"true"),".")))),(0,l.kt)("p",null,"Results:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"strong"},"debouncedCallback"),":")," Debounced callback."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"strong"},"actions.flush"),":")," Flush funciton. Run callback immediately."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"strong"},"actions.cancel"),":")," Cancel debounce timer.")),(0,l.kt)("h2",{id:"example"},"Example"),(0,l.kt)(r.Z,{mdxType:"ExampleBlock"},(0,l.kt)(p,{mdxType:"Example"})),(0,l.kt)(o.Z,{language:"tsx",mdxType:"CodeBlock"},'import React, { useState } from "react";\nimport { useDebounce, useToggle, useUpdate } from "@lilib/hooks";\n\nfunction random() {\n  return Math.ceil(Math.random() * 5000);\n}\n\nfunction Example() {\n  const [wait, setWait] = useState(random());\n  const [leading, { toggle: toggleLeading }] = useToggle(false);\n  const [trailing, { toggle: toggleTrailing }] = useToggle(true);\n\n  const [value, setValue] = useState("");\n  const [debouncedValue, setDebouncedValue] = useState("");\n  const [debouncedCallback, { flush, cancel }] = useDebounce(\n    () => {\n      setDebouncedValue(value);\n    },\n    { wait, leading, trailing }\n  );\n\n  useUpdate(debouncedCallback, [value]);\n\n  return (\n    <>\n      <p>\n        Actions:{" "}\n        <button onClick={() => setWait(random())}>Change wait time</button>{" "}\n        <button onClick={() => toggleLeading()}>Toggle leading</button>{" "}\n        <button onClick={() => toggleTrailing()}>Toggle trailing</button>\n      </p>\n      <p>\n        Options:{" "}\n        {`{ wait: ${wait}, leading: ${leading}, trailing: ${trailing} }`}\n      </p>\n      <p>\n        Enter value:{" "}\n        <input\n          value={value}\n          onChange={(event) => {\n            setValue(event.target.value);\n          }}\n        />{" "}\n        <button onClick={flush}>Flush</button>{" "}\n        <button onClick={cancel}>Cancel</button>\n      </p>\n      <div>Debounced value: {debouncedValue}</div>\n    </>\n  );\n}\n\nexport default Example;\n'))}h.isMDXComponent=!0},1296:(e,n,t)=>{var a=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,o=/^0o[0-7]+$/i,r=parseInt,u="object"==typeof t.g&&t.g&&t.g.Object===Object&&t.g,c="object"==typeof self&&self&&self.Object===Object&&self,s=u||c||Function("return this")(),d=Object.prototype.toString,p=Math.max,g=Math.min,m=function(){return s.Date.now()};function f(e){var n=typeof e;return!!e&&("object"==n||"function"==n)}function k(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==d.call(e)}(e))return NaN;if(f(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=f(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var t=l.test(e);return t||o.test(e)?r(e.slice(2),t?2:8):i.test(e)?NaN:+e}e.exports=function(e,n,t){var a,i,l,o,r,u,c=0,s=!1,d=!1,b=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function v(n){var t=a,l=i;return a=i=void 0,c=n,o=e.apply(l,t)}function h(e){return c=e,r=setTimeout(C,n),s?v(e):o}function N(e){var t=e-u;return void 0===u||t>=n||t<0||d&&e-c>=l}function C(){var e=m();if(N(e))return y(e);r=setTimeout(C,function(e){var t=n-(e-u);return d?g(t,l-(e-c)):t}(e))}function y(e){return r=void 0,b&&a?v(e):(a=i=void 0,o)}function x(){var e=m(),t=N(e);if(a=arguments,i=this,u=e,t){if(void 0===r)return h(u);if(d)return r=setTimeout(C,n),v(u)}return void 0===r&&(r=setTimeout(C,n)),o}return n=k(n)||0,f(t)&&(s=!!t.leading,l=(d="maxWait"in t)?p(k(t.maxWait)||0,n):l,b="trailing"in t?!!t.trailing:b),x.cancel=function(){void 0!==r&&clearTimeout(r),c=0,a=u=i=r=void 0},x.flush=function(){return void 0===r?o:y(m())},x}}}]);